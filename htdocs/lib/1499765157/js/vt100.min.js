/***

// VT100.js -- JavaScript based terminal emulator
// Copyright (C) 2008-2009 Markus Gutschke <markus@shellinabox.com>
//
// This program is free software; you can redistribute it and/or modify
// it under the terms of the GNU General Public License version 2 as
// published by the Free Software Foundation.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License along
// with this program; if not, write to the Free Software Foundation, Inc.,
// 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//
// In addition to these license terms, the author grants the following
// additional rights:
//
// If you modify this program, or any covered work, by linking or
// combining it with the OpenSSL project's OpenSSL library (or a
// modified version of that library), containing parts covered by the
// terms of the OpenSSL or SSLeay licenses, the author
// grants you additional permission to convey the resulting work.
// Corresponding Source for a non-source form of such a combination
// shall include the source code for the parts of OpenSSL used as well
// as that of the covered work.
//
// You may at your option choose to remove this additional permission from
// the work, or from any part of it.
//
// It is possible to build this program in a way that it loads OpenSSL
// libraries at run-time. If doing so, the following notices are required
// by the OpenSSL and SSLeay licenses:
//
// This product includes software developed by the OpenSSL Project
// for use in the OpenSSL Toolkit. (http://www.openssl.org/)
//
// This product includes cryptographic software written by Eric Young
// (eay@cryptsoft.com)
//
//
// The most up-to-date version of this program is always available from
// http://shellinabox.com
//
//
// Notes:
//
// The author believes that for the purposes of this license, you meet the
// requirements for publishing the source code, if your web server publishes
// the source in unmodified form (i.e. with licensing information, comments,
// formatting, and identifier names intact). If there are technical reasons
// that require you to make changes to the source code when serving the
// JavaScript (e.g to remove pre-processor directives from the source), these
// changes should be done in a reversible fashion.
//
// The author does not consider websites that reference this script in
// unmodified form, and web servers that serve this script in unmodified form
// to be derived works. As such, they are believed to be outside of the
// scope of this license and not subject to the rights or restrictions of the
// GNU General Public License.
//
// If in doubt, consult a legal professional familiar with the laws that
// apply in your country.

***/

function VT100($container$$){this.urlRE="undefined"==typeof linkifyURLs||0>=linkifyURLs?null:RegExp("(?:http|https|ftp)://(?:[^:@/ \u00a0]*(?::[^@/ \u00a0]*)?@)?(?:[1-9][0-9]{0,2}(?:[.][1-9][0-9]{0,2}){3}|[0-9a-fA-F]{0,4}(?::{1,2}[0-9a-fA-F]{1,4})+|(?!-)[^[!\"#$%&'()*+,/:;<=>?@\\^_`{|}~\x00- \u007f-\u00a0]+)(?::[1-9][0-9]*)?(?:/(?:(?![/ \u00a0]|[,.)}\"'!]+[ \u00a0]|[,.)}\"'!]+$).)*)*|"+(1>=linkifyURLs?"":"(?:[^:@/ \u00a0]*(?::[^@/ \u00a0]*)?@)?(?:[1-9][0-9]{0,2}(?:[.][1-9][0-9]{0,2}){3}|localhost|(?:(?!-)[^.[!\"#$%&'()*+,/:;<=>?@\\^_`{|}~\x00- \u007f-\u00a0]+[.]){2,}(?:(?:com|net|org|edu|gov|aero|asia|biz|cat|coop|info|int|jobs|mil|mobi|museum|name|pro|tel|travel|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw|arpa)(?![a-zA-Z0-9])|[Xx][Nn]--[-a-zA-Z0-9]+))(?::[1-9][0-9]{0,4})?(?:/(?:(?![/ \u00a0]|[,.)}\"'!]+[ \u00a0]|[,.)}\"'!]+$).)*)*|")+
"(?:mailto:)"+(1>=linkifyURLs?"":"?")+"[-_.+a-zA-Z0-9]+@(?!-)[-a-zA-Z0-9]+(?:[.](?!-)[-a-zA-Z0-9]+)?[.](?:(?:com|net|org|edu|gov|aero|asia|biz|cat|coop|info|int|jobs|mil|mobi|museum|name|pro|tel|travel|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw|arpa)(?![a-zA-Z0-9])|[Xx][Nn]--[-a-zA-Z0-9]+)(?:[?](?:(?![ \u00a0]|[,.)}\"'!]+[ \u00a0]|[,.)}\"'!]+$).)*)?");
this.getUserSettings();this.initializeElements($container$$);this.maxScrollbackLines=500;this.npar=0;this.par=[];this.isQuestionMark=!1;this.savedX=[];this.savedY=[];this.savedAttr=[];this.savedUseGMap=0;this.savedGMap=[this.Latin1Map,this.VT100GraphicsMap,this.CodePage437Map,this.DirectToFontMap];this.savedValid=[];this.statusString=this.respondString="";this.internalClipboard=void 0;this.reset(!0)}
VT100.prototype.reset=function $VT100$$reset$($clearHistory_i$$){this.isEsc=0;this.needWrap=!1;this.autoWrapMode=!0;this.printing=this.mouseReporting=this.offsetMode=this.crLfMode=this.cursorKeyMode=this.applKeyMode=this.insertMode=this.toggleMeta=this.dispCtrl=!1;"undefined"!=typeof this.printWin&&(this.printWin&&!this.printWin.closed)&&this.printWin.close();this.printWin=null;this.utfEnabled=this.utfPreferred;this.utfChar=this.utfCount=0;this.color="ansi0 bgAnsi15";this.style="";this.attr=240;this.useGMap=
0;this.GMap=[this.Latin1Map,this.VT100GraphicsMap,this.CodePage437Map,this.DirectToFontMap];this.translate=this.GMap[this.useGMap];this.top=0;this.bottom=this.terminalHeight;this.lastCharacter=" ";this.userTabStop=[];if($clearHistory_i$$)for($clearHistory_i$$=0;2>$clearHistory_i$$;$clearHistory_i$$++)for(;this.console[$clearHistory_i$$].firstChild;)this.console[$clearHistory_i$$].removeChild(this.console[$clearHistory_i$$].firstChild);this.enableAlternateScreen(!1);this.gotoXY(0,0);this.showCursor();
this.isInverted=!1;this.refreshInvertedState();this.clearRegion(0,0,this.terminalWidth,this.terminalHeight,this.color,this.style)};VT100.prototype.addListener=function $VT100$$addListener$($elem$$,$event$$,$listener$$){$elem$$.addEventListener?$elem$$.addEventListener($event$$,$listener$$,!1):$elem$$.attachEvent("on"+$event$$,$listener$$)};
VT100.prototype.getUserSettings=function $VT100$$getUserSettings$(){this.signature=1;this.utfPreferred=!0;this.visualBell="undefined"!=typeof suppressAllAudio&&suppressAllAudio;this.autoprint=!0;this.visualBell&&(this.signature=Math.floor(16807*this.signature+1)%-2147483649);if("undefined"!=typeof userCSSList)for(var $i$$3_key$$=0;$i$$3_key$$<userCSSList.length;++$i$$3_key$$){for(var $label$$=userCSSList[$i$$3_key$$][0],$j$$=0;$j$$<$label$$.length;++$j$$)this.signature=Math.floor(16807*this.signature+
$label$$.charCodeAt($j$$))%-2147483649;userCSSList[$i$$3_key$$][1]&&(this.signature=Math.floor(16807*this.signature+1)%-2147483649)}$i$$3_key$$="shellInABox="+this.signature+":";$label$$=document.cookie.indexOf($i$$3_key$$);if(0<=$label$$&&($label$$=document.cookie.substr($label$$+$i$$3_key$$.length).replace(/([0-1]*).*/,"$1"),$label$$.length==3+("undefined"==typeof userCSSList?0:userCSSList.length)))if(this.utfPreferred="0"!=$label$$.charAt(0),this.visualBell="0"!=$label$$.charAt(1),this.autoprint=
"0"!=$label$$.charAt(2),"undefined"!=typeof userCSSList)for($i$$3_key$$=0;$i$$3_key$$<userCSSList.length;++$i$$3_key$$)userCSSList[$i$$3_key$$][2]="0"!=$label$$.charAt($i$$3_key$$+3);this.utfEnabled=this.utfPreferred};
VT100.prototype.storeUserSettings=function $VT100$$storeUserSettings$(){var $settings$$="shellInABox="+this.signature+":"+(this.utfEnabled?"1":"0")+(this.visualBell?"1":"0")+(this.autoprint?"1":"0");if("undefined"!=typeof userCSSList)for(var $d_i$$=0;$d_i$$<userCSSList.length;++$d_i$$)$settings$$+=userCSSList[$d_i$$][2]?"1":"0";$d_i$$=new Date;$d_i$$.setDate($d_i$$.getDate()+3653);document.cookie=$settings$$+";expires="+$d_i$$.toGMTString()};
VT100.prototype.initializeUserCSSStyles=function $VT100$$initializeUserCSSStyles$(){this.usercssActions=[];if("undefined"!=typeof userCSSList){for(var $menu$$="",$group$$="",$wasSingleSel$$=1,$beginOfGroup$$=0,$i$$0$$=0;$i$$0$$<=userCSSList.length;++$i$$0$$){if($i$$0$$<userCSSList.length){var $label$$0$$=userCSSList[$i$$0$$][0],$newGroup$$=userCSSList[$i$$0$$][1],$enabled$$=userCSSList[$i$$0$$][2],$path$$2_type$$=userCSSList[$i$$0$$][3]||"",$j$$0$$=document.createElement("link"),$href_id$$=document.createAttribute("id");
$href_id$$.nodeValue="usercss-"+$i$$0$$;$j$$0$$.setAttributeNode($href_id$$);$href_id$$=document.createAttribute("rel");$href_id$$.nodeValue="stylesheet";$j$$0$$.setAttributeNode($href_id$$);$href_id$$=document.createAttribute("href");$href_id$$.nodeValue=$path$$2_type$$+"usercss-"+$i$$0$$+".css";$j$$0$$.setAttributeNode($href_id$$);$path$$2_type$$=document.createAttribute("type");$path$$2_type$$.nodeValue="text/css";$j$$0$$.setAttributeNode($path$$2_type$$);document.getElementsByTagName("head")[0].appendChild($j$$0$$);
$j$$0$$.disabled=!$enabled$$}if($newGroup$$||$i$$0$$==userCSSList.length){if(0!=$beginOfGroup$$&&(1<$i$$0$$-$beginOfGroup$$||!$wasSingleSel$$))$menu$$+="<hr />";$wasSingleSel$$=1>$i$$0$$-$beginOfGroup$$;$menu$$+=$group$$;$group$$="";for($j$$0$$=$beginOfGroup$$;$j$$0$$<$i$$0$$;++$j$$0$$)this.usercssActions[this.usercssActions.length]=function($vt100$$,$current$$,$begin$$,$count$$){return function(){for(var $entry$$=$vt100$$.getChildById($vt100$$.menu,"beginusercss"),$i$$=-1,$j$$=-1,$c$$=$count$$;0<
$c$$;++$j$$){if("LI"==$entry$$.tagName&&++$i$$>=$begin$$){--$c$$;var $label$$=$vt100$$.usercss.childNodes[$j$$];if("undefined"==typeof $label$$.textContent){var $s$$=$label$$.innerText;$label$$.innerHTML="";$label$$.appendChild(document.createTextNode($s$$))}else $label$$.textContent=$label$$.textContent;$s$$=document.getElementById("usercss-"+$i$$);$i$$==$current$$?($s$$.disabled=1==$count$$?!$s$$.disabled:!1,$s$$.disabled||($label$$.innerHTML='<img src="/media/cli/enabled.gif" />'+$label$$.innerHTML)):
$s$$.disabled=!0;userCSSList[$i$$][2]=!$s$$.disabled}$entry$$=$entry$$.nextSibling}}}(this,$j$$0$$,$beginOfGroup$$,$i$$0$$-$beginOfGroup$$);if($i$$0$$==userCSSList.length)break;$beginOfGroup$$=$i$$0$$}$group$$+="<li>"+($enabled$$?'<img src="/media/cli/enabled.gif" />':"")+$label$$0$$+"</li>"}this.usercss.innerHTML=$menu$$}};
VT100.prototype.initializeElements=function $VT100$$initializeElements$($container$$){if($container$$)this.container=$container$$;else if(!(this.container=document.getElementById("vt100")))this.container=document.createElement("div"),this.container.id="vt100",document.body.appendChild(this.container);if(!this.getChildById(this.container,"reconnect")||!this.getChildById(this.container,"menu")||!this.getChildById(this.container,"scrollable")||!this.getChildById(this.container,"console")||!this.getChildById(this.container,
"alt_console")||!this.getChildById(this.container,"ieprobe")||!this.getChildById(this.container,"padding")||!this.getChildById(this.container,"cursor")||!this.getChildById(this.container,"lineheight")||!this.getChildById(this.container,"usercss")||!this.getChildById(this.container,"space")||!this.getChildById(this.container,"input")||!this.getChildById(this.container,"cliphelper")){$container$$="";try{"undefined"!=typeof navigator.mimeTypes["audio/x-wav"].enabledPlugin.name&&($container$$="undefined"!=
typeof suppressAllAudio&&suppressAllAudio?"":'<embed classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" id="beep_embed" src="beep.wav" autostart="false" volume="100" enablejavascript="true" type="audio/x-wav" height="16" width="200" style="position:absolute;left:-1000px;top:-1000px" />')}catch($e$$0$$){}this.container.innerHTML='<div id="reconnect" style="visibility: hidden"><input type="button" value="Connect" onsubmit="return false" /></div><div id="cursize" style="visibility: hidden"></div><div id="menu"></div><div id="scrollable"><pre id="lineheight">&nbsp;</pre><pre id="console"><pre></pre><div id="ieprobe"><span>&nbsp;</span></div></pre><pre id="alt_console" style="display: none"></pre><div id="padding"></div><pre id="cursor">&nbsp;</pre></div><div class="hidden"><div id="usercss"></div><pre><div><span id="space"></span></div></pre><input type="textfield" id="input" /><input type="textfield" id="cliphelper" />'+
("undefined"!=typeof suppressAllAudio&&suppressAllAudio?"":$container$$+'<bgsound id="beep_bgsound" loop=1 />')+"</div>"}if("undefined"!=typeof suppressAllAudio&&suppressAllAudio)this.beeper=void 0;else if(this.beeper=this.getChildById(this.container,"beep_embed"),!this.beeper||!this.beeper.Play)if(this.beeper=this.getChildById(this.container,"beep_bgsound"),!this.beeper||"undefined"==typeof this.beeper.src)this.beeper=void 0;this.reconnectBtn=this.getChildById(this.container,"reconnect");this.curSizeBox=
this.getChildById(this.container,"cursize");this.menu=this.getChildById(this.container,"menu");this.scrollable=this.getChildById(this.container,"scrollable");this.lineheight=this.getChildById(this.container,"lineheight");this.console=[this.getChildById(this.container,"console"),this.getChildById(this.container,"alt_console")];$container$$=this.getChildById(this.container,"ieprobe");this.padding=this.getChildById(this.container,"padding");this.cursor=this.getChildById(this.container,"cursor");this.usercss=
this.getChildById(this.container,"usercss");this.space=this.getChildById(this.container,"space");this.input=this.getChildById(this.container,"input");this.cliphelper=this.getChildById(this.container,"cliphelper");this.initializeUserCSSStyles();this.cursorWidth=this.cursor.clientWidth;this.cursorHeight=this.lineheight.clientHeight;this.isIE=1<$container$$.offsetTop;$container$$=void 0;this.console.innerHTML="";for(var $container$$=parseInt(this.getCurrentComputedStyle(document.body,"marginTop")),$marginLeft$$=
parseInt(this.getCurrentComputedStyle(document.body,"marginLeft")),$marginRight$$=parseInt(this.getCurrentComputedStyle(document.body,"marginRight")),$x$$=this.container.offsetLeft,$y$$=this.container.offsetTop,$parent$$=this.container;$parent$$=$parent$$.offsetParent;)$x$$+=$parent$$.offsetLeft,$y$$+=$parent$$.offsetTop;this.isEmbedded=$container$$!=$y$$||$marginLeft$$!=$x$$||(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-$marginRight$$!=$x$$+this.container.offsetWidth;
if(!this.isEmbedded){this.indicateSize=!1;var $vt100$$0$$=this;setTimeout(function(){$vt100$$0$$.indicateSize=!0},100);this.addListener(window,"resize",function($vt100$$){return function(){$vt100$$.hideContextMenu();$vt100$$.resizer();$vt100$$.showCurrentSize()}}(this));document.body.style.margin="0px";try{document.body.style.overflow="hidden"}catch($e$$1$$){}try{document.body.oncontextmenu=function $document$body$oncontextmenu$(){return!1}}catch($e$$2$$){}}this.hideContextMenu();this.addListener(this.reconnectBtn.firstChild,
"click",function($vt100$$){return function(){var $rc$$=$vt100$$.reconnect();$vt100$$.input.focus();return $rc$$}}(this));this.addListener(this.input,"blur",function($vt100$$){return function(){$vt100$$.blurCursor()}}(this));this.addListener(this.input,"focus",function($vt100$$){return function(){$vt100$$.focusCursor()}}(this));this.addListener(this.input,"keydown",function($vt100$$){return function($e$$){$e$$||($e$$=window.event);return $vt100$$.keyDown($e$$)}}(this));this.addListener(this.input,
"keypress",function($vt100$$){return function($e$$){$e$$||($e$$=window.event);return $vt100$$.keyPressed($e$$)}}(this));this.addListener(this.input,"keyup",function($vt100$$){return function($e$$){$e$$||($e$$=window.event);return $vt100$$.keyUp($e$$)}}(this));$container$$=function $$container$$$($vt100$$,$type$$){return function($e$$){$e$$||($e$$=window.event);return $vt100$$.mouseEvent($e$$,$type$$)}};this.addListener(this.scrollable,"mousedown",$container$$(this,0));this.addListener(this.scrollable,
"mouseup",$container$$(this,1));this.addListener(this.scrollable,"click",$container$$(this,2));this.top=this.numScrollbackLines=this.cursorY=this.cursorX=this.currentScreen=0;this.bottom=2147483647;this.resizer();this.focusCursor();this.input.focus()};
VT100.prototype.getChildById=function $VT100$$getChildById$($parent$$,$id$$){var $elem$$=$parent$$.all||$parent$$.getElementsByTagName("*");if("undefined"==typeof $elem$$.namedItem){for(var $i$$=0;$i$$<$elem$$.length;$i$$++)if($elem$$[$i$$].id==$id$$)return $elem$$[$i$$];return null}return($elem$$=($parent$$.all||$parent$$.getElementsByTagName("*")).namedItem($id$$))?$elem$$[0]||$elem$$:null};
VT100.prototype.getCurrentComputedStyle=function $VT100$$getCurrentComputedStyle$($elem$$,$style$$){return"undefined"!=typeof $elem$$.currentStyle?$elem$$.currentStyle[$style$$]:document.defaultView.getComputedStyle($elem$$,null)[$style$$]};VT100.prototype.reconnect=function $VT100$$reconnect$(){return!1};VT100.prototype.showReconnect=function $VT100$$showReconnect$($state$$){this.reconnectBtn.style.visibility=$state$$?"":"hidden"};
VT100.prototype.repairElements=function $VT100$$repairElements$($console_line$$){for($console_line$$=$console_line$$.firstChild;$console_line$$;$console_line$$=$console_line$$.nextSibling)if(!$console_line$$.clientHeight){var $newLine$$=document.createElement($console_line$$.tagName);$newLine$$.style.cssText=$console_line$$.style.cssText;$newLine$$.className=$console_line$$.className;if("DIV"==$console_line$$.tagName)for(var $span$$=$console_line$$.firstChild;$span$$;$span$$=$span$$.nextSibling){var $newSpan$$=
document.createElement($span$$.tagName);$newSpan$$.style.cssText=$span$$.style.cssText;$newSpan$$.style.className=$span$$.style.className;this.setTextContent($newSpan$$,this.getTextContent($span$$));$newLine$$.appendChild($newSpan$$)}else this.setTextContent($newLine$$,this.getTextContent($console_line$$));$console_line$$.parentNode.replaceChild($newLine$$,$console_line$$);$console_line$$=$newLine$$}};VT100.prototype.resized=function $VT100$$resized$(){};
VT100.prototype.resizer=function $VT100$$resizer$(){var $console$$1_line$$=document.createElement("pre");this.setTextContent($console$$1_line$$," ");$console$$1_line$$.id="cursor";$console$$1_line$$.style.cssText=this.cursor.style.cssText;this.cursor.parentNode.insertBefore($console$$1_line$$,this.cursor);if($console$$1_line$$.clientHeight){this.cursor.parentNode.removeChild(this.cursor);this.cursor=$console$$1_line$$;this.repairElements(this.console[0]);this.repairElements(this.console[1]);this.cursor.style.width=
this.cursorWidth+"px";this.cursor.style.height=this.cursorHeight+"px";var $console$$1_line$$=this.console[this.currentScreen],$height$$11_i$$=(this.isEmbedded?this.container.clientHeight:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-1,$cx_partial$$=$height$$11_i$$%this.cursorHeight;this.scrollable.style.height=(0<$height$$11_i$$?$height$$11_i$$:0)+"px";this.padding.style.height=(0<$cx_partial$$?$cx_partial$$:0)+"px";$height$$11_i$$=this.terminalHeight;this.updateWidth();
this.updateHeight();var $cx_partial$$=this.cursorX,$cy$$=this.cursorY+this.numScrollbackLines;for(this.updateNumScrollbackLines();this.currentScreen&&0<this.numScrollbackLines;)$console$$1_line$$.removeChild($console$$1_line$$.firstChild),this.numScrollbackLines--;$cy$$-=this.numScrollbackLines;0>$cx_partial$$?$cx_partial$$=0:$cx_partial$$>this.terminalWidth&&($cx_partial$$=this.terminalWidth-1,0>$cx_partial$$&&($cx_partial$$=0));0>$cy$$?$cy$$=0:$cy$$>this.terminalHeight&&($cy$$=this.terminalHeight-
1,0>$cy$$&&($cy$$=0));if(this.bottom>this.terminalHeight||this.bottom==$height$$11_i$$)this.bottom=this.terminalHeight;this.top>=this.bottom&&(this.top=this.bottom-1,0>this.top&&(this.top=0));this.truncateLines(this.terminalWidth);this.putString($cx_partial$$,$cy$$,"",void 0);this.scrollable.scrollTop=this.numScrollbackLines*this.cursorHeight+1;$console$$1_line$$=$console$$1_line$$.firstChild;for($height$$11_i$$=0;$height$$11_i$$<this.numScrollbackLines;$height$$11_i$$++)$console$$1_line$$.className=
"scrollback",$console$$1_line$$=$console$$1_line$$.nextSibling;for(;$console$$1_line$$;)$console$$1_line$$.className="",$console$$1_line$$=$console$$1_line$$.nextSibling;this.reconnectBtn.style.left=(this.terminalWidth*this.cursorWidth-this.reconnectBtn.clientWidth)/2+"px";this.reconnectBtn.style.top=(this.terminalHeight*this.cursorHeight-this.reconnectBtn.clientHeight)/2+"px";this.resized(this.terminalWidth,this.terminalHeight)}else $console$$1_line$$.parentNode.removeChild($console$$1_line$$)};
VT100.prototype.showCurrentSize=function $VT100$$showCurrentSize$(){if(this.indicateSize){this.curSizeBox.innerHTML=""+this.terminalWidth+"x"+this.terminalHeight;this.curSizeBox.style.left=(this.terminalWidth*this.cursorWidth-this.curSizeBox.clientWidth)/2+"px";this.curSizeBox.style.top=(this.terminalHeight*this.cursorHeight-this.curSizeBox.clientHeight)/2+"px";this.curSizeBox.style.visibility="";this.curSizeTimeout&&clearTimeout(this.curSizeTimeout);var $vt100$$=this;this.curSizeTimeout=setTimeout(function(){$vt100$$.curSizeTimeout=
null;$vt100$$.curSizeBox.style.visibility="hidden"},1E3)}};VT100.prototype.selection=function $VT100$$selection$(){try{return""+(window.getSelection&&window.getSelection()||document.selection&&"Text"==document.selection.type&&document.selection.createRange().text||"")}catch($e$$){}return""};
VT100.prototype.cancelEvent=function $VT100$$cancelEvent$($event$$){try{$event$$.stopPropagation(),$event$$.preventDefault()}catch($e$$){}try{$event$$.cancelBubble=!0,$event$$.returnValue=!1,$event$$.button=0,$event$$.keyCode=0}catch($e$$0$$){}return!1};
VT100.prototype.mouseEvent=function $VT100$$mouseEvent$($event$$,$type$$){var $report_selection$$=this.selection();(1==$type$$||2==$type$$)&&!$report_selection$$.length&&this.input.focus();for(var $offsetX$$=this.container.offsetLeft,$offsetY$$=this.container.offsetTop,$e$$20_x$$=this.container;$e$$20_x$$=$e$$20_x$$.offsetParent;)$offsetX$$+=$e$$20_x$$.offsetLeft,$offsetY$$+=$e$$20_x$$.offsetTop;var $e$$20_x$$=($event$$.clientX-$offsetX$$)/this.cursorWidth,$y$$=($event$$.clientY-$offsetY$$+this.scrollable.offsetTop)/
this.cursorHeight-this.numScrollbackLines,$inside$$=!0;$e$$20_x$$>=this.terminalWidth&&($e$$20_x$$=this.terminalWidth-1,$inside$$=!1);0>$e$$20_x$$&&($e$$20_x$$=0,$inside$$=!1);$y$$>=this.terminalHeight&&($y$$=this.terminalHeight-1,$inside$$=!1);0>$y$$&&($y$$=0,$inside$$=!1);var $button$$=0!=$type$$?3:"undefined"!=typeof $event$$.pageX?$event$$.button:[void 0,0,2,0,1,0,1,0][$event$$.button];if(void 0!=$button$$){$event$$.shiftKey&&($button$$|=4);if($event$$.altKey||$event$$.metaKey)$button$$|=8;$event$$.ctrlKey&&
($button$$|=16)}if(this.mouseReporting&&!$report_selection$$.length&&(0!=$type$$||!$event$$.shiftKey))if(($inside$$||0!=$type$$)&&void 0!=$button$$)return $report_selection$$="\u001b[M"+String.fromCharCode($button$$+32)+String.fromCharCode($e$$20_x$$+33)+String.fromCharCode($y$$+33),2!=$type$$&&this.keysPressed($report_selection$$),this.cancelEvent($event$$);if(2==$button$$&&!$event$$.shiftKey)return 0==$type$$&&this.showContextMenu($event$$.clientX-$offsetX$$,$event$$.clientY-$offsetY$$),this.cancelEvent($event$$);
if(this.mouseReporting)try{$event$$.shiftKey=!1}catch($e$$){}return!0};VT100.prototype.replaceChar=function $VT100$$replaceChar$($s$$,$ch$$,$repl$$){for(var $i$$=-1;;){$i$$=$s$$.indexOf($ch$$,$i$$+1);if(0>$i$$)break;$s$$=$s$$.substr(0,$i$$)+$repl$$+$s$$.substr($i$$+1)}return $s$$};VT100.prototype.htmlEscape=function $VT100$$htmlEscape$($s$$){return this.replaceChar(this.replaceChar(this.replaceChar(this.replaceChar($s$$,"&","&amp;"),"<","&lt;"),'"',"&quot;")," ","\u00a0")};
VT100.prototype.getTextContent=function $VT100$$getTextContent$($elem$$){return $elem$$.textContent||("undefined"==typeof $elem$$.textContent?$elem$$.innerText:"")};
VT100.prototype.setTextContent=function $VT100$$setTextContent$($elem$$,$s$$){if(this.urlRE&&this.urlRE.test($s$$)){for(var $inner$$="";;){var $consumed$$=0;null!=RegExp.leftContext&&($inner$$+=this.htmlEscape(RegExp.leftContext),$consumed$$+=RegExp.leftContext.length);var $url$$=this.htmlEscape(RegExp.lastMatch),$fullUrl_slash$$=$url$$;if(0>$url$$.indexOf("http://")&&0>$url$$.indexOf("https://")&&0>$url$$.indexOf("ftp://")&&0>$url$$.indexOf("mailto:"))var $fullUrl_slash$$=$url$$.indexOf("/"),$at$$=
$url$$.indexOf("@"),$question$$=$url$$.indexOf("?"),$fullUrl_slash$$=0<$at$$&&($at$$<$question$$||0>$question$$)&&(0>$fullUrl_slash$$||0<$question$$&&$fullUrl_slash$$>$question$$)?"mailto:"+$url$$:(0==$url$$.indexOf("ftp.")?"ftp://":"http://")+$url$$;$inner$$+='<a target="vt100Link" href="'+$fullUrl_slash$$+'">'+$url$$+"</a>";$consumed$$+=RegExp.lastMatch.length;$s$$=$s$$.substr($consumed$$);if(!this.urlRE.test($s$$)){null!=RegExp.rightContext&&($inner$$+=this.htmlEscape(RegExp.rightContext));break}}$elem$$.innerHTML=
$inner$$}else if("undefined"==typeof $elem$$.textContent){if($elem$$.innerText!=$s$$)try{$elem$$.innerText=$s$$}catch($e$$){$elem$$.innerHTML="",$elem$$.appendChild(document.createTextNode(this.replaceChar($s$$," ","\u00a0")))}}else $elem$$.textContent!=$s$$&&($elem$$.textContent=$s$$)};
VT100.prototype.insertBlankLine=function $VT100$$insertBlankLine$($y$$,$color$$2_console$$,$style$$){$color$$2_console$$||($color$$2_console$$="ansi0 bgAnsi15");$style$$||($style$$="");var $line$$;if("ansi0 bgAnsi15"!=$color$$2_console$$&&!$style$$)$line$$=document.createElement("pre"),this.setTextContent($line$$,"\n");else{$line$$=document.createElement("div");var $span$$=document.createElement("span");$span$$.style.cssText=$style$$;$span$$.style.className=$color$$2_console$$;this.setTextContent($span$$,
this.spaces(this.terminalWidth));$line$$.appendChild($span$$)}$line$$.style.height=this.cursorHeight+"px";$color$$2_console$$=this.console[this.currentScreen];$color$$2_console$$.childNodes.length>$y$$?$color$$2_console$$.insertBefore($line$$,$color$$2_console$$.childNodes[$y$$]):$color$$2_console$$.appendChild($line$$)};VT100.prototype.updateWidth=function $VT100$$updateWidth$(){return this.terminalWidth=Math.floor(this.console[this.currentScreen].offsetWidth/this.cursorWidth)};
VT100.prototype.updateHeight=function $VT100$$updateHeight$(){return this.terminalHeight=this.isEmbedded?Math.floor((this.container.clientHeight-1)/this.cursorHeight):Math.floor(((window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-1)/this.cursorHeight)};
VT100.prototype.updateNumScrollbackLines=function $VT100$$updateNumScrollbackLines$(){var $scrollback$$=Math.floor(this.console[this.currentScreen].offsetHeight/this.cursorHeight)-this.terminalHeight;return this.numScrollbackLines=0>$scrollback$$?0:$scrollback$$};
VT100.prototype.truncateLines=function $VT100$$truncateLines$($width$$){0>$width$$&&($width$$=0);for(var $line$$=this.console[this.currentScreen].firstChild;$line$$;$line$$=$line$$.nextSibling)if("DIV"==$line$$.tagName){for(var $i$$10_x$$=0,$span$$=$line$$.firstChild;$span$$;$span$$=$span$$.nextSibling){var $blank_s$$=this.getTextContent($span$$),$l$$=$blank_s$$.length;if($i$$10_x$$+$l$$>$width$$){for(this.setTextContent($span$$,$blank_s$$.substr(0,$width$$-$i$$10_x$$));$span$$.nextSibling;)$line$$.removeChild($line$$.lastChild);
break}$i$$10_x$$+=$l$$}for($span$$=$line$$.lastChild;$span$$&&"ansi0 bgAnsi15"==$span$$.className&&!$span$$.style.cssText.length;){$blank_s$$=this.getTextContent($span$$);for($i$$10_x$$=$blank_s$$.length;$i$$10_x$$--;)if(" "!=$blank_s$$.charAt($i$$10_x$$)&&"\u00a0"!=$blank_s$$.charAt($i$$10_x$$)){$i$$10_x$$+1!=$blank_s$$.length&&this.setTextContent($blank_s$$.substr(0,$i$$10_x$$+1));$span$$=null;break}$span$$&&($blank_s$$=$span$$,($span$$=$span$$.previousSibling)?$line$$.removeChild($blank_s$$):($blank_s$$=
document.createElement("pre"),$blank_s$$.style.height=this.cursorHeight+"px",this.setTextContent($blank_s$$,"\n"),$line$$.parentNode.replaceChild($blank_s$$,$line$$)))}}};
VT100.prototype.putString=function $VT100$$putString$($pixelX_x$$,$div_span$$3_y$$,$blank$$1_i$$11_text$$,$color$$,$nxtIdx_style$$){$color$$||($color$$="ansi0 bgAnsi15");$nxtIdx_style$$||($nxtIdx_style$$="");var $yIdx$$=$div_span$$3_y$$+this.numScrollbackLines,$line$$,$sibling$$,$s$$,$idx_xPos$$=0,$console$$=this.console[this.currentScreen];if(!$blank$$1_i$$11_text$$.length&&($yIdx$$>=$console$$.childNodes.length||"DIV"!=$console$$.childNodes[$yIdx$$].tagName))$div_span$$3_y$$=null;else{for(;$console$$.childNodes.length<=
$yIdx$$;)this.insertBlankLine($yIdx$$);$line$$=$console$$.childNodes[$yIdx$$];"DIV"!=$line$$.tagName&&($div_span$$3_y$$=document.createElement("div"),$div_span$$3_y$$.style.height=this.cursorHeight+"px",$div_span$$3_y$$.innerHTML="<span></span>",$console$$.replaceChild($div_span$$3_y$$,$line$$),$line$$=$div_span$$3_y$$);for(var $div_span$$3_y$$=$line$$.firstChild,$len_oldColor$$;$div_span$$3_y$$.nextSibling&&$idx_xPos$$<$pixelX_x$$;){$len_oldColor$$=this.getTextContent($div_span$$3_y$$).length;if($idx_xPos$$+
$len_oldColor$$>$pixelX_x$$)break;$idx_xPos$$+=$len_oldColor$$;$div_span$$3_y$$=$div_span$$3_y$$.nextSibling}if($blank$$1_i$$11_text$$.length){$s$$=this.getTextContent($div_span$$3_y$$);$len_oldColor$$=$div_span$$3_y$$.className;var $oldStyle$$=$div_span$$3_y$$.style.cssText;if($idx_xPos$$+$s$$.length<$pixelX_x$$){if("ansi0 bgAnsi15"!=$len_oldColor$$||""!=$oldStyle$$)$div_span$$3_y$$=document.createElement("span"),$line$$.appendChild($div_span$$3_y$$),$div_span$$3_y$$.className="ansi0 bgAnsi15",$div_span$$3_y$$.style.cssText=
"",$len_oldColor$$="ansi0 bgAnsi15",$oldStyle$$="",$idx_xPos$$+=$s$$.length,$s$$="";do $s$$+=" ";while($idx_xPos$$+$s$$.length<$pixelX_x$$)}var $del$$=$blank$$1_i$$11_text$$.length-$s$$.length+$pixelX_x$$-$idx_xPos$$;if($len_oldColor$$!=$color$$||$oldStyle$$!=$nxtIdx_style$$&&($oldStyle$$||$nxtIdx_style$$)){if($idx_xPos$$==$pixelX_x$$)$blank$$1_i$$11_text$$.length>=$s$$.length||($sibling$$=document.createElement("span"),$line$$.insertBefore($sibling$$,$div_span$$3_y$$),this.setTextContent($div_span$$3_y$$,
$s$$.substr($blank$$1_i$$11_text$$.length)),$div_span$$3_y$$=$sibling$$);else{var $remainder$$=$s$$.substr($pixelX_x$$+$blank$$1_i$$11_text$$.length-$idx_xPos$$);this.setTextContent($div_span$$3_y$$,$s$$.substr(0,$pixelX_x$$-$idx_xPos$$));$idx_xPos$$=$pixelX_x$$;$sibling$$=document.createElement("span");$div_span$$3_y$$.nextSibling?($line$$.insertBefore($sibling$$,$div_span$$3_y$$.nextSibling),$div_span$$3_y$$=$sibling$$,$remainder$$.length&&($sibling$$=document.createElement("span"),$sibling$$.className=
$len_oldColor$$,$sibling$$.style.cssText=$oldStyle$$,this.setTextContent($sibling$$,$remainder$$),$line$$.insertBefore($sibling$$,$div_span$$3_y$$.nextSibling))):($line$$.appendChild($sibling$$),$div_span$$3_y$$=$sibling$$,$remainder$$.length&&($sibling$$=document.createElement("span"),$sibling$$.className=$len_oldColor$$,$sibling$$.style.cssText=$oldStyle$$,this.setTextContent($sibling$$,$remainder$$),$line$$.appendChild($sibling$$)))}$s$$=$blank$$1_i$$11_text$$;$div_span$$3_y$$.className=$color$$;
$div_span$$3_y$$.style.cssText=$nxtIdx_style$$}else $s$$=$s$$.substr(0,$pixelX_x$$-$idx_xPos$$)+$blank$$1_i$$11_text$$+$s$$.substr($pixelX_x$$+$blank$$1_i$$11_text$$.length-$idx_xPos$$);this.setTextContent($div_span$$3_y$$,$s$$);for($sibling$$=$div_span$$3_y$$.nextSibling;0<$del$$&&$sibling$$;)if($s$$=this.getTextContent($sibling$$),$len_oldColor$$=$s$$.length,$len_oldColor$$<=$del$$)$line$$.removeChild($sibling$$),$del$$-=$len_oldColor$$,$sibling$$=$div_span$$3_y$$.nextSibling;else{this.setTextContent($sibling$$,
$s$$.substr($del$$));break}$sibling$$&&($div_span$$3_y$$.className==$sibling$$.className&&$div_span$$3_y$$.style.cssText==$sibling$$.style.cssText)&&(this.setTextContent($div_span$$3_y$$,this.getTextContent($div_span$$3_y$$)+this.getTextContent($sibling$$)),$line$$.removeChild($sibling$$))}}this.cursorX=$pixelX_x$$+$blank$$1_i$$11_text$$.length;this.cursorX>=this.terminalWidth&&(this.cursorX=this.terminalWidth-1,0>this.cursorX&&(this.cursorX=0));$color$$=$pixelX_x$$=-1;this.cursor.style.visibility||
($idx_xPos$$=this.cursorX-$idx_xPos$$,$div_span$$3_y$$?($color$$=$div_span$$3_y$$.offsetTop+$div_span$$3_y$$.offsetParent.offsetTop,$s$$=this.getTextContent($div_span$$3_y$$),$nxtIdx_style$$=$idx_xPos$$-$s$$.length,0>$nxtIdx_style$$?(this.setTextContent(this.cursor,$s$$.charAt($idx_xPos$$)),$pixelX_x$$=$div_span$$3_y$$.offsetLeft+$idx_xPos$$*$div_span$$3_y$$.offsetWidth/$s$$.length):(0==$nxtIdx_style$$&&($pixelX_x$$=$div_span$$3_y$$.offsetLeft+$div_span$$3_y$$.offsetWidth),$div_span$$3_y$$.nextSibling?
($s$$=this.getTextContent($div_span$$3_y$$.nextSibling),this.setTextContent(this.cursor,$s$$.charAt($nxtIdx_style$$)),0>$pixelX_x$$&&($pixelX_x$$=$div_span$$3_y$$.nextSibling.offsetLeft+$nxtIdx_style$$*$div_span$$3_y$$.offsetWidth/$s$$.length)):this.setTextContent(this.cursor," "))):this.setTextContent(this.cursor," "));0<=$pixelX_x$$?this.cursor.style.left=$pixelX_x$$+(this.isIE?1:0)+"px":(this.setTextContent(this.space,this.spaces(this.cursorX)),this.cursor.style.left=this.space.offsetWidth+$console$$.offsetLeft+
"px");this.cursorY=$yIdx$$-this.numScrollbackLines;this.cursor.style.top=0<=$color$$?$color$$+"px":$yIdx$$*this.cursorHeight+$console$$.offsetTop+"px";if($blank$$1_i$$11_text$$.length){if(($sibling$$=$div_span$$3_y$$.previousSibling)&&$div_span$$3_y$$.className==$sibling$$.className&&$div_span$$3_y$$.style.cssText==$sibling$$.style.cssText)this.setTextContent($div_span$$3_y$$,this.getTextContent($sibling$$)+this.getTextContent($div_span$$3_y$$)),$line$$.removeChild($sibling$$);for($div_span$$3_y$$=
$line$$.lastChild;$div_span$$3_y$$&&"ansi0 bgAnsi15"==$div_span$$3_y$$.className&&!$div_span$$3_y$$.style.cssText.length;){$s$$=this.getTextContent($div_span$$3_y$$);for($blank$$1_i$$11_text$$=$s$$.length;$blank$$1_i$$11_text$$--;)if(" "!=$s$$.charAt($blank$$1_i$$11_text$$)&&"\u00a0"!=$s$$.charAt($blank$$1_i$$11_text$$)){$blank$$1_i$$11_text$$+1!=$s$$.length&&this.setTextContent($s$$.substr(0,$blank$$1_i$$11_text$$+1));$div_span$$3_y$$=null;break}$div_span$$3_y$$&&($sibling$$=$div_span$$3_y$$,($div_span$$3_y$$=
$div_span$$3_y$$.previousSibling)?$line$$.removeChild($sibling$$):($blank$$1_i$$11_text$$=document.createElement("pre"),$blank$$1_i$$11_text$$.style.height=this.cursorHeight+"px",this.setTextContent($blank$$1_i$$11_text$$,"\n"),$line$$.parentNode.replaceChild($blank$$1_i$$11_text$$,$line$$)))}}};
VT100.prototype.gotoXY=function $VT100$$gotoXY$($x$$,$y$$){$x$$>=this.terminalWidth&&($x$$=this.terminalWidth-1);0>$x$$&&($x$$=0);var $minY$$,$maxY$$;this.offsetMode?($minY$$=this.top,$maxY$$=this.bottom):($minY$$=0,$maxY$$=this.terminalHeight);$y$$>=$maxY$$&&($y$$=$maxY$$-1);$y$$<$minY$$&&($y$$=$minY$$);this.putString($x$$,$y$$,"",void 0);this.needWrap=!1};VT100.prototype.gotoXaY=function $VT100$$gotoXaY$($x$$,$y$$){this.gotoXY($x$$,this.offsetMode?this.top+$y$$:$y$$)};
VT100.prototype.refreshInvertedState=function $VT100$$refreshInvertedState$(){this.scrollable.className=this.isInverted?this.scrollable.className+" inverted":this.scrollable.className.replace(/ *inverted/,"")};
VT100.prototype.enableAlternateScreen=function $VT100$$enableAlternateScreen$($state$$){($state$$?1:0)==this.currentScreen?this.resizer():($state$$&&this.saveCursor(),this.currentScreen=$state$$?1:0,this.console[1-this.currentScreen].style.display="none",this.console[this.currentScreen].style.display="",this.resizer(),$state$$?(this.gotoXY(0,0),this.clearRegion(0,0,this.terminalWidth,this.terminalHeight)):this.restoreCursor())};
VT100.prototype.hideCursor=function $VT100$$hideCursor$(){return"hidden"!=this.cursor.style.visibility?(this.cursor.style.visibility="hidden",!0):!1};VT100.prototype.showCursor=function $VT100$$showCursor$($x$$,$y$$){return this.cursor.style.visibility?(this.cursor.style.visibility="",this.putString(void 0==$x$$?this.cursorX:$x$$,void 0==$y$$?this.cursorY:$y$$,"",void 0),!0):!1};
VT100.prototype.scrollBack=function $VT100$$scrollBack$(){var $i$$=this.scrollable.scrollTop-this.scrollable.clientHeight;this.scrollable.scrollTop=0>$i$$?0:$i$$};VT100.prototype.scrollFore=function $VT100$$scrollFore$(){var $i$$=this.scrollable.scrollTop+this.scrollable.clientHeight;this.scrollable.scrollTop=$i$$>this.numScrollbackLines*this.cursorHeight+1?this.numScrollbackLines*this.cursorHeight+1:$i$$};VT100.prototype.spaces=function $VT100$$spaces$($i$$){for(var $s$$="";0<$i$$--;)$s$$+=" ";return $s$$};
VT100.prototype.clearRegion=function $VT100$$clearRegion$($console$$4_x$$,$y$$,$s$$9_w$$,$h$$5_i$$,$color$$,$style$$){$s$$9_w$$+=$console$$4_x$$;0>$console$$4_x$$&&($console$$4_x$$=0);$s$$9_w$$>this.terminalWidth&&($s$$9_w$$=this.terminalWidth);if(!(0>=($s$$9_w$$-=$console$$4_x$$)))if($h$$5_i$$+=$y$$,0>$y$$&&($y$$=0),$h$$5_i$$>this.terminalHeight&&($h$$5_i$$=this.terminalHeight),!(0>=($h$$5_i$$-=$y$$)))if(!this.numScrollbackLines&&$s$$9_w$$==this.terminalWidth&&$h$$5_i$$==this.terminalHeight&&(void 0==
$color$$||"ansi0 bgAnsi15"==$color$$)&&!$style$$){for($console$$4_x$$=this.console[this.currentScreen];$console$$4_x$$.lastChild;)$console$$4_x$$.removeChild($console$$4_x$$.lastChild);this.putString(this.cursorX,this.cursorY,"",void 0)}else{for(var $hidden$$=this.hideCursor(),$cx$$=this.cursorX,$cy$$=this.cursorY,$s$$9_w$$=this.spaces($s$$9_w$$),$h$$5_i$$=$y$$+$h$$5_i$$;$h$$5_i$$-- >$y$$;)this.putString($console$$4_x$$,$h$$5_i$$,$s$$9_w$$,$color$$,$style$$);$hidden$$?this.showCursor($cx$$,$cy$$):
this.putString($cx$$,$cy$$,"",void 0)}};
VT100.prototype.copyLineSegment=function $VT100$$copyLineSegment$($dX$$,$dY$$,$hidden$$,$cy$$2_sY_x$$,$cx$$2_w$$){var $text$$=[],$className$$=[],$style$$=[],$console$$5_i$$16_line$$5_span$$=this.console[this.currentScreen];if($cy$$2_sY_x$$>=$console$$5_i$$16_line$$5_span$$.childNodes.length)$text$$[0]=this.spaces($cx$$2_w$$),$className$$[0]=void 0,$style$$[0]=void 0;else if($console$$5_i$$16_line$$5_span$$=$console$$5_i$$16_line$$5_span$$.childNodes[$cy$$2_sY_x$$],"DIV"!=$console$$5_i$$16_line$$5_span$$.tagName||
!$console$$5_i$$16_line$$5_span$$.childNodes.length)$text$$[0]=this.spaces($cx$$2_w$$),$className$$[0]=void 0,$style$$[0]=void 0;else{$cy$$2_sY_x$$=0;for($console$$5_i$$16_line$$5_span$$=$console$$5_i$$16_line$$5_span$$.firstChild;$console$$5_i$$16_line$$5_span$$&&0<$cx$$2_w$$;$console$$5_i$$16_line$$5_span$$=$console$$5_i$$16_line$$5_span$$.nextSibling){var $s$$=this.getTextContent($console$$5_i$$16_line$$5_span$$),$len$$=$s$$.length;if($cy$$2_sY_x$$+$len$$>$hidden$$){var $o$$=$hidden$$>$cy$$2_sY_x$$?
$hidden$$-$cy$$2_sY_x$$:0;$text$$[$text$$.length]=$s$$.substr($o$$,$cx$$2_w$$);$className$$[$className$$.length]=$console$$5_i$$16_line$$5_span$$.className;$style$$[$style$$.length]=$console$$5_i$$16_line$$5_span$$.style.cssText;$cx$$2_w$$-=$len$$-$o$$}$cy$$2_sY_x$$+=$len$$}0<$cx$$2_w$$&&($text$$[$text$$.length]=this.spaces($cx$$2_w$$),$className$$[$className$$.length]=void 0,$style$$[$style$$.length]=void 0)}$hidden$$=this.hideCursor();$cx$$2_w$$=this.cursorX;$cy$$2_sY_x$$=this.cursorY;for($console$$5_i$$16_line$$5_span$$=
0;$console$$5_i$$16_line$$5_span$$<$text$$.length;$console$$5_i$$16_line$$5_span$$++)this.putString($dX$$,$dY$$-this.numScrollbackLines,$text$$[$console$$5_i$$16_line$$5_span$$],$className$$[$console$$5_i$$16_line$$5_span$$]?$className$$[$console$$5_i$$16_line$$5_span$$]:"ansi0 bgAnsi15",$style$$[$console$$5_i$$16_line$$5_span$$]),$dX$$+=$text$$[$console$$5_i$$16_line$$5_span$$].length;$hidden$$?this.showCursor($cx$$2_w$$,$cy$$2_sY_x$$):this.putString($cx$$2_w$$,$cy$$2_sY_x$$,"",void 0)};
VT100.prototype.scrollRegion=function $VT100$$scrollRegion$($j$$3_x$$,$y$$,$w$$,$h$$,$incX$$,$incY$$,$color$$,$style$$){var $left$$=0>$incX$$?-$incX$$:0,$hidden$$3_right$$=0<$incX$$?$incX$$:0,$cx$$=0>$incY$$?-$incY$$:0,$cy$$=0<$incY$$?$incY$$:0,$console$$=null,$w$$=$w$$+$j$$3_x$$;$j$$3_x$$<$left$$&&($j$$3_x$$=$left$$);$w$$>this.terminalWidth-$hidden$$3_right$$&&($w$$=this.terminalWidth-$hidden$$3_right$$);if(0>=($w$$-=$j$$3_x$$))$console$$=1;$h$$+=$y$$;$y$$<$cx$$&&($y$$=$cx$$);$h$$>this.terminalHeight-
$cy$$&&($h$$=this.terminalHeight-$cy$$);if(0>($h$$-=$y$$))$console$$=1;if(!$console$$){$style$$&&$style$$.indexOf("underline")&&($style$$=$style$$.replace(/text-decoration:underline;/,""));$left$$=this.numScrollbackLines-(this.scrollable.scrollTop-1)/this.cursorHeight;$hidden$$3_right$$=this.hideCursor();$cx$$=this.cursorX;$cy$$=this.cursorY;$console$$=this.console[this.currentScreen];if(!$incX$$&&!$j$$3_x$$&&$w$$==this.terminalWidth)if(0>$incY$$)if(!this.currentScreen&&$y$$==-$incY$$&&$h$$==this.terminalHeight+
$incY$$){for(;$console$$.childNodes.length<this.terminalHeight;)this.insertBlankLine(this.terminalHeight);for(var $i$$=0;$i$$<$y$$;$i$$++)this.insertBlankLine($console$$.childNodes.length,$color$$,$style$$);for(this.updateNumScrollbackLines();this.numScrollbackLines>(this.currentScreen?0:this.maxScrollbackLines);)$console$$.removeChild($console$$.firstChild),this.numScrollbackLines--;$i$$=this.numScrollbackLines;for($j$$3_x$$=-$incY$$;0<$i$$--&&0<$j$$3_x$$--;)$console$$.childNodes[$i$$].className=
"scrollback"}else{for($i$$=-$incY$$;0<$i$$--&&$console$$.childNodes.length>this.numScrollbackLines+$y$$+$incY$$;)$console$$.removeChild($console$$.childNodes[this.numScrollbackLines+$y$$+$incY$$]);if(0<this.numScrollbackLines||$console$$.childNodes.length>this.numScrollbackLines+$y$$+$h$$+$incY$$)for($i$$=-$incY$$;0<$i$$--;)this.insertBlankLine(this.numScrollbackLines+$y$$+$h$$+$incY$$,$color$$,$style$$)}else{for($i$$=$incY$$;0<$i$$--&&$console$$.childNodes.length>this.numScrollbackLines+$y$$+$h$$;)$console$$.removeChild($console$$.childNodes[this.numScrollbackLines+
$y$$+$h$$]);for($i$$=$incY$$;$i$$--;)this.insertBlankLine(this.numScrollbackLines+$y$$,$color$$,$style$$)}else{if(0>=$incY$$)for($i$$=$y$$+this.numScrollbackLines;$i$$<$y$$+this.numScrollbackLines+$h$$;$i$$++)this.copyLineSegment($j$$3_x$$+$incX$$,$i$$+$incY$$,$j$$3_x$$,$i$$,$w$$);else for($i$$=$y$$+this.numScrollbackLines+$h$$;$i$$-- >$y$$+this.numScrollbackLines;)this.copyLineSegment($j$$3_x$$+$incX$$,$i$$+$incY$$,$j$$3_x$$,$i$$,$w$$);0<$incX$$?this.clearRegion($j$$3_x$$,$y$$,$incX$$,$h$$,$color$$,
$style$$):0>$incX$$&&this.clearRegion($j$$3_x$$+$w$$+$incX$$,$y$$,-$incX$$,$h$$,$color$$,$style$$);0<$incY$$?this.clearRegion($j$$3_x$$,$y$$,$w$$,$incY$$,$color$$,$style$$):0>$incY$$&&this.clearRegion($j$$3_x$$,$y$$+$h$$+$incY$$,$w$$,-$incY$$,$color$$,$style$$)}this.scrollable.scrollTop=(this.numScrollbackLines-$left$$)*this.cursorHeight+1;$hidden$$3_right$$?this.showCursor($cx$$,$cy$$):this.putString($cx$$,$cy$$,"",void 0)}};
VT100.prototype.copy=function $VT100$$copy$($selection$$){void 0==$selection$$&&($selection$$=this.selection());this.internalClipboard=void 0;if($selection$$.length){try{this.cliphelper.value=$selection$$,this.cliphelper.select(),this.cliphelper.createTextRange().execCommand("copy")}catch($e$$){this.internalClipboard=$selection$$}this.cliphelper.value=""}};VT100.prototype.copyLast=function $VT100$$copyLast$(){this.copy(this.lastSelection)};
VT100.prototype.pasteFnc=function $VT100$$pasteFnc$(){var $clipboard$$=void 0;if(void 0!=this.internalClipboard)$clipboard$$=this.internalClipboard;else try{this.cliphelper.value="",this.cliphelper.createTextRange().execCommand("paste"),$clipboard$$=this.cliphelper.value}catch($e$$){}this.cliphelper.value="";if($clipboard$$&&"hidden"==this.menu.style.visibility)return function(){this.keysPressed(""+$clipboard$$)}};
VT100.prototype.toggleUTF=function $VT100$$toggleUTF$(){this.utfPreferred=this.utfEnabled=!this.utfEnabled};VT100.prototype.toggleBell=function $VT100$$toggleBell$(){this.visualBell=!this.visualBell};VT100.prototype.about=function $VT100$$about$(){alert("VT100 Terminal Emulator 2.10 (revision 186)\nCopyright 2008-2009 by Markus Gutschke\nFor more information check http://shellinabox.com")};
VT100.prototype.hideContextMenu=function $VT100$$hideContextMenu$(){this.menu.style.visibility="hidden";this.menu.style.top="-100px";this.menu.style.left="-100px";this.menu.style.width="0px";this.menu.style.height="0px"};VT100.prototype.extendContextMenu=function $VT100$$extendContextMenu$(){};
VT100.prototype.showContextMenu=function $VT100$$showContextMenu$($x$$,$y$$){this.menu.innerHTML='<table class="popup" cellpadding="0" cellspacing="0"><tr><td><ul id="menuentries"><li id="beginclipboard">Copy</li><li id="endclipboard">Paste</li><hr /><li id="reset">Reset</li><hr /><li id="beginconfig">'+(this.utfEnabled?'<img src="/media/cli/enabled.gif" />':"")+'Unicode</li><li id="endconfig">'+(this.visualBell?'<img src="/media/cli/enabled.gif" />':"")+"Visual Bell</li>"+(this.usercss.firstChild?
'<hr id="beginusercss" />'+this.usercss.innerHTML+'<hr id="endusercss" />':"<hr />")+'<li id="about">About...</li></ul></td></tr></table>';var $popup$$=this.menu.firstChild,$menuentries_node$$=this.getChildById($popup$$,"menuentries");this.lastSelection=this.selection();this.lastSelection.length||($menuentries_node$$.firstChild.className="disabled");var $actions$$=this.pasteFnc();$actions$$||($menuentries_node$$.childNodes[1].className="disabled");for(var $actions$$=[this.copyLast,$actions$$,this.reset,
this.toggleUTF,this.toggleBell],$i$$=0;$i$$<this.usercssActions.length;++$i$$)$actions$$[$actions$$.length]=this.usercssActions[$i$$];$actions$$[$actions$$.length]=this.about;this.extendContextMenu($menuentries_node$$,$actions$$);$menuentries_node$$=$menuentries_node$$.firstChild;for($i$$=0;$menuentries_node$$;$menuentries_node$$=$menuentries_node$$.nextSibling)"LI"==$menuentries_node$$.tagName&&("disabled"!=$menuentries_node$$.className&&(this.addListener($menuentries_node$$,"mouseover",function($vt100$$,
$node$$){return function(){$node$$.className="hover"}}(this,$menuentries_node$$)),this.addListener($menuentries_node$$,"mouseout",function($vt100$$,$node$$){return function(){$node$$.className=""}}(this,$menuentries_node$$)),this.addListener($menuentries_node$$,"mousedown",function($vt100$$,$action$$){return function($event$$){$vt100$$.hideContextMenu();$action$$.call($vt100$$);$vt100$$.storeUserSettings();return $vt100$$.cancelEvent($event$$||window.event)}}(this,$actions$$[$i$$])),this.addListener($menuentries_node$$,
"mouseup",function($vt100$$){return function($event$$){return $vt100$$.cancelEvent($event$$||window.event)}}(this)),this.addListener($menuentries_node$$,"mouseclick",function($vt100$$){return function($event$$){return $vt100$$.cancelEvent($event$$||window.event)}}())),$i$$++);$x$$+$popup$$.clientWidth>this.container.offsetWidth&&($x$$=this.container.offsetWidth-$popup$$.clientWidth);0>$x$$&&($x$$=0);$y$$+$popup$$.clientHeight>this.container.offsetHeight&&($y$$=this.container.offsetHeight-$popup$$.clientHeight);
0>$y$$&&($y$$=0);$popup$$.style.left=$x$$+"px";$popup$$.style.top=$y$$+"px";this.menu.style.left="0px";this.menu.style.top="0px";this.menu.style.width=this.container.offsetWidth+"px";this.menu.style.height=this.container.offsetHeight+"px";this.addListener(this.menu,"click",function($vt100$$){return function(){$vt100$$.hideContextMenu()}}(this));this.menu.style.visibility=""};
VT100.prototype.keysPressed=function $VT100$$keysPressed$($ch$$){for(var $i$$=0;$i$$<$ch$$.length;$i$$++){var $c$$=$ch$$.charCodeAt($i$$);this.vt100(7<=$c$$&&15>=$c$$||24==$c$$||26==$c$$||27==$c$$||32<=$c$$?String.fromCharCode($c$$):"<"+$c$$+">")}};
VT100.prototype.applyModifiers=function $VT100$$applyModifiers$($ch$$,$event$$){if($ch$$){if($event$$.ctrlKey&&32<=$ch$$&&127>=$ch$$)switch($ch$$){case 51:$ch$$=27;break;case 52:$ch$$=28;break;case 53:$ch$$=29;break;case 54:$ch$$=30;break;case 55:$ch$$=31;break;case 56:$ch$$=127;break;case 63:$ch$$=127;break;default:$ch$$&=31}return String.fromCharCode($ch$$)}};
VT100.prototype.handleKey=function $VT100$$handleKey$($event$$){var $ch$$,$key$$14_start$$;"undefined"!=typeof $event$$.charCode?($ch$$=$event$$.charCode,$key$$14_start$$=$event$$.keyCode):($ch$$=$event$$.keyCode,$key$$14_start$$=void 0);$ch$$&&($key$$14_start$$=void 0);$ch$$=this.applyModifiers($ch$$,$event$$);if(void 0!=$ch$$)this.scrollable.scrollTop=this.numScrollbackLines*this.cursorHeight+1;else{if(($event$$.altKey||$event$$.metaKey)&&!$event$$.shiftKey&&!$event$$.ctrlKey)switch($key$$14_start$$){case 33:$ch$$=
"\u001b<";break;case 34:$ch$$="\u001b>";break;case 37:$ch$$="\u001bb";break;case 38:$ch$$="\u001bp";break;case 39:$ch$$="\u001bf";break;case 40:$ch$$="\u001bn";break;case 46:$ch$$="\u001bd"}else if($event$$.shiftKey&&!$event$$.ctrlKey&&!$event$$.altKey&&!$event$$.metaKey)switch($key$$14_start$$){case 33:this.scrollBack();return;case 34:this.scrollFore();return}if(void 0==$ch$$){switch($key$$14_start$$){case 8:$ch$$="\u007f";break;case 9:$ch$$="\t";break;case 10:$ch$$="\n";break;case 13:$ch$$=this.crLfMode?
"\r\n":"\r";break;case 16:return;case 17:return;case 18:return;case 19:return;case 20:return;case 27:$ch$$="\u001b";break;case 33:$ch$$="\u001b[5~";break;case 34:$ch$$="\u001b[6~";break;case 35:$ch$$="\u001bOF";break;case 36:$ch$$="\u001bOH";break;case 37:$ch$$=this.cursorKeyMode?"\u001bOD":"\u001b[D";break;case 38:$ch$$=this.cursorKeyMode?"\u001bOA":"\u001b[A";break;case 39:$ch$$=this.cursorKeyMode?"\u001bOC":"\u001b[C";break;case 40:$ch$$=this.cursorKeyMode?"\u001bOB":"\u001b[B";break;case 45:$ch$$=
"\u001b[2~";break;case 46:$ch$$="\u001b[3~";break;case 91:return;case 92:return;case 93:return;case 96:$ch$$=this.applyModifiers(48,$event$$);break;case 97:$ch$$=this.applyModifiers(49,$event$$);break;case 98:$ch$$=this.applyModifiers(50,$event$$);break;case 99:$ch$$=this.applyModifiers(51,$event$$);break;case 100:$ch$$=this.applyModifiers(52,$event$$);break;case 101:$ch$$=this.applyModifiers(53,$event$$);break;case 102:$ch$$=this.applyModifiers(54,$event$$);break;case 103:$ch$$=this.applyModifiers(55,
$event$$);break;case 104:$ch$$=this.applyModifiers(56,$event$$);break;case 105:$ch$$=this.applyModifiers(58,$event$$);break;case 106:$ch$$=this.applyModifiers(42,$event$$);break;case 107:$ch$$=this.applyModifiers(43,$event$$);break;case 109:$ch$$=this.applyModifiers(45,$event$$);break;case 110:$ch$$=this.applyModifiers(46,$event$$);break;case 111:$ch$$=this.applyModifiers(47,$event$$);break;case 112:$ch$$="\u001bOP";break;case 113:$ch$$="\u001bOQ";break;case 114:$ch$$="\u001bOR";break;case 115:$ch$$=
"\u001bOS";break;case 116:$ch$$="\u001b[15~";break;case 117:$ch$$="\u001b[17~";break;case 118:$ch$$="\u001b[18~";break;case 119:$ch$$="\u001b[19~";break;case 120:$ch$$="\u001b[20~";break;case 121:$ch$$="\u001b[21~";break;case 122:$ch$$="\u001b[23~";break;case 123:$ch$$="\u001b[24~";break;case 144:return;case 145:return;case 186:$ch$$=this.applyModifiers(59,$event$$);break;case 187:$ch$$=this.applyModifiers(61,$event$$);break;case 188:$ch$$=this.applyModifiers(44,$event$$);break;case 189:$ch$$=this.applyModifiers(45,
$event$$);break;case 190:$ch$$=this.applyModifiers(46,$event$$);break;case 191:$ch$$=this.applyModifiers(47,$event$$);break;case 192:$ch$$=this.applyModifiers(96,$event$$);break;case 219:$ch$$=this.applyModifiers(91,$event$$);break;case 220:$ch$$=this.applyModifiers(92,$event$$);break;case 221:$ch$$=this.applyModifiers(93,$event$$);break;case 222:$ch$$=this.applyModifiers(39,$event$$);break;default:return}this.scrollable.scrollTop=this.numScrollbackLines*this.cursorHeight+1}}if($event$$.shiftKey||
$event$$.ctrlKey||$event$$.altKey||$event$$.metaKey){var $digit$$,$part1$$,$part2$$;if("\u001b["==($key$$14_start$$=$ch$$.substr(0,2))){for($part1$$=$key$$14_start$$;$part1$$.length<$ch$$.length&&48<=($digit$$=$ch$$.charCodeAt($part1$$.length))&&57>=$digit$$;)$part1$$=$ch$$.substr(0,$part1$$.length+1);$part2$$=$ch$$.substr($part1$$.length);2<$part1$$.length&&($part1$$+=";")}else"\u001bO"==$key$$14_start$$&&($part1$$=$key$$14_start$$,$part2$$=$ch$$.substr(2));if(void 0!=$part1$$)$ch$$=$part1$$+(($event$$.shiftKey?
1:0)+($event$$.altKey|$event$$.metaKey?2:0)+($event$$.ctrlKey?4:0))+$part2$$;else if(1==$ch$$.length&&($event$$.altKey||$event$$.metaKey))$ch$$="\u001b"+$ch$$}"hidden"==this.menu.style.visibility&&this.keysPressed($ch$$)};
VT100.prototype.inspect=function $VT100$$inspect$($o$$,$d$$){void 0==$d$$&&($d$$=0);var $rc$$="";if("object"==typeof $o$$&&2>++$d$$){$rc$$="[\r\n";for(i in $o$$){$rc$$+=this.spaces(2*$d$$)+i+" -> ";try{$rc$$+=this.inspect($o$$[i],$d$$)}catch($e$$){$rc$$+="???\r\n"}}$rc$$+="]\r\n"}else $rc$$+=(""+$o$$).replace(/\n/g," ").replace(/ +/g," ")+"\r\n";return $rc$$};
VT100.prototype.checkComposedKeys=function $VT100$$checkComposedKeys$(){var $s$$=this.input.value;$s$$.length&&(this.input.value="","hidden"==this.menu.style.visibility&&this.keysPressed($s$$))};
VT100.prototype.fixEvent=function $VT100$$fixEvent$($event$$){if($event$$.ctrlKey&&$event$$.altKey){var $fake_u$$=[];$fake_u$$.charCode=$event$$.charCode;$fake_u$$.keyCode=$event$$.keyCode;$fake_u$$.ctrlKey=!1;$fake_u$$.shiftKey=$event$$.shiftKey;$fake_u$$.altKey=!1;$fake_u$$.metaKey=$event$$.metaKey;return $fake_u$$}if($event$$.shiftKey){var $s$$=$fake_u$$=void 0;switch(this.lastNormalKeyDownEvent.keyCode){case 39:$fake_u$$=39;$s$$=34;break;case 44:$fake_u$$=44;$s$$=60;break;case 45:$fake_u$$=45;
$s$$=95;break;case 46:$fake_u$$=46;$s$$=62;break;case 47:$fake_u$$=47;$s$$=63;break;case 48:$fake_u$$=48;$s$$=41;break;case 49:$fake_u$$=49;$s$$=33;break;case 50:$fake_u$$=50;$s$$=64;break;case 51:$fake_u$$=51;$s$$=35;break;case 52:$fake_u$$=52;$s$$=36;break;case 53:$fake_u$$=53;$s$$=37;break;case 54:$fake_u$$=54;$s$$=94;break;case 55:$fake_u$$=55;$s$$=38;break;case 56:$fake_u$$=56;$s$$=42;break;case 57:$fake_u$$=57;$s$$=40;break;case 59:$fake_u$$=59;$s$$=58;break;case 61:$fake_u$$=61;$s$$=43;break;
case 91:$fake_u$$=91;$s$$=123;break;case 92:$fake_u$$=92;$s$$=124;break;case 93:$fake_u$$=93;$s$$=125;break;case 96:$fake_u$$=96;$s$$=126;break;case 109:$fake_u$$=45;$s$$=95;break;case 111:$fake_u$$=47;$s$$=63;break;case 186:$fake_u$$=59;$s$$=58;break;case 187:$fake_u$$=61;$s$$=43;break;case 188:$fake_u$$=44;$s$$=60;break;case 189:$fake_u$$=45;$s$$=95;break;case 190:$fake_u$$=46;$s$$=62;break;case 191:$fake_u$$=47;$s$$=63;break;case 192:$fake_u$$=96;$s$$=126;break;case 219:$fake_u$$=91;$s$$=123;break;
case 220:$fake_u$$=92;$s$$=124;break;case 221:$fake_u$$=93;$s$$=125;break;case 222:$fake_u$$=39,$s$$=34}if($s$$&&($event$$.charCode==$fake_u$$||0==$event$$.charCode))return $fake_u$$=[],$fake_u$$.charCode=$s$$,$fake_u$$.keyCode=$event$$.keyCode,$fake_u$$.ctrlKey=$event$$.ctrlKey,$fake_u$$.shiftKey=$event$$.shiftKey,$fake_u$$.altKey=$event$$.altKey,$fake_u$$.metaKey=$event$$.metaKey,$fake_u$$}return $event$$};
VT100.prototype.keyDown=function $VT100$$keyDown$($event$$){this.checkComposedKeys($event$$);this.lastKeyDownEvent=this.lastKeyPressedEvent=void 0;this.lastNormalKeyDownEvent=$event$$;var $asciiKey$$=32==$event$$.keyCode||48<=$event$$.keyCode&&57>=$event$$.keyCode||65<=$event$$.keyCode&&90>=$event$$.keyCode,$alphNumKey$$=$asciiKey$$||96<=$event$$.keyCode&&105>=$event$$.keyCode||226==$event$$.keyCode,$fake$$=$alphNumKey$$||59==$event$$.keyCode||61==$event$$.keyCode||106==$event$$.keyCode||107==$event$$.keyCode||
109<=$event$$.keyCode&&111>=$event$$.keyCode||186<=$event$$.keyCode&&192>=$event$$.keyCode||219<=$event$$.keyCode&&222>=$event$$.keyCode||173==$event$$.keyCode||252==$event$$.keyCode;try{"Konqueror"==navigator.appName&&($fake$$|=128>$event$$.keyCode)}catch($e$$){}if(($event$$.charCode||$event$$.keyCode)&&($alphNumKey$$&&($event$$.ctrlKey||$event$$.altKey||$event$$.metaKey)&&!$event$$.shiftKey&&(!$event$$.ctrlKey||!$event$$.altKey)||this.catchModifiersEarly&&$fake$$&&!$alphNumKey$$&&($event$$.ctrlKey||
$event$$.altKey||$event$$.metaKey)||!$fake$$)){this.lastKeyDownEvent=$event$$;$fake$$=[];$fake$$.ctrlKey=$event$$.ctrlKey;$fake$$.shiftKey=$event$$.shiftKey;$fake$$.altKey=$event$$.altKey;$fake$$.metaKey=$event$$.metaKey;$asciiKey$$?($fake$$.charCode=$event$$.keyCode,$fake$$.keyCode=0):($fake$$.charCode=0,$fake$$.keyCode=$event$$.keyCode,!$alphNumKey$$&&$event$$.shiftKey&&($fake$$=this.fixEvent($fake$$)));this.handleKey($fake$$);this.lastNormalKeyDownEvent=void 0;try{$event$$.stopPropagation(),$event$$.preventDefault()}catch($e$$0$$){}try{$event$$.cancelBubble=
!0,$event$$.returnValue=!1,$event$$.keyCode=0}catch($e$$1$$){}return!1}return!0};VT100.prototype.keyPressed=function $VT100$$keyPressed$($event$$){this.lastKeyDownEvent?this.lastKeyDownEvent=void 0:this.handleKey($event$$.altKey||$event$$.metaKey?this.fixEvent($event$$):$event$$);try{$event$$.preventDefault()}catch($e$$){}try{$event$$.cancelBubble=!0,$event$$.returnValue=!1,$event$$.keyCode=0}catch($e$$0$$){}this.lastNormalKeyDownEvent=void 0;this.lastKeyPressedEvent=$event$$;return!1};
VT100.prototype.keyUp=function $VT100$$keyUp$($event$$){if(this.lastKeyPressedEvent)($event$$.target||$event$$.srcElement).value="";else if(this.checkComposedKeys($event$$),this.lastNormalKeyDownEvent){this.catchModifiersEarly=!0;var $asciiKey$$=32==$event$$.keyCode||48<=$event$$.keyCode&&57>=$event$$.keyCode||65<=$event$$.keyCode&&90>=$event$$.keyCode,$alphNumKey$$=$asciiKey$$||96<=$event$$.keyCode&&105>=$event$$.keyCode,$fake$$=[];$fake$$.ctrlKey=$event$$.ctrlKey;$fake$$.shiftKey=$event$$.shiftKey;
$fake$$.altKey=$event$$.altKey;$fake$$.metaKey=$event$$.metaKey;if($asciiKey$$)$fake$$.charCode=$event$$.keyCode,$fake$$.keyCode=0;else if($fake$$.charCode=0,$fake$$.keyCode=$event$$.keyCode,!$alphNumKey$$&&($event$$.ctrlKey||$event$$.altKey||$event$$.metaKey))$fake$$=this.fixEvent($fake$$);this.lastNormalKeyDownEvent=void 0;this.handleKey($fake$$)}try{$event$$.cancelBubble=!0,$event$$.returnValue=!1,$event$$.keyCode=0}catch($e$$){}this.lastKeyPressedEvent=this.lastKeyDownEvent=void 0;return!1};
VT100.prototype.animateCursor=function $VT100$$animateCursor$($inactive$$){if(!this.cursorInterval){var $vt100$$=this;this.cursorInterval=setInterval(function(){$vt100$$.animateCursor();$vt100$$.checkComposedKeys()},500)}if(void 0!=$inactive$$||"inactive"!=this.cursor.className)this.cursor.className=$inactive$$?"inactive":"bright"==this.cursor.className?"dim":"bright"};VT100.prototype.blurCursor=function $VT100$$blurCursor$(){this.animateCursor(!0)};VT100.prototype.focusCursor=function $VT100$$focusCursor$(){this.animateCursor(!1)};
VT100.prototype.flashScreen=function $VT100$$flashScreen$(){this.isInverted=!this.isInverted;this.refreshInvertedState();this.isInverted=!this.isInverted;var $vt100$$=this;setTimeout(function(){$vt100$$.refreshInvertedState()},100)};VT100.prototype.beep=function $VT100$$beep$(){if(this.visualBell)this.flashScreen();else try{this.beeper.Play()}catch($e$$){try{this.beeper.src="beep.wav"}catch($e$$0$$){}}};
VT100.prototype.bs=function $VT100$$bs$(){0<this.cursorX&&(this.gotoXY(this.cursorX-1,this.cursorY),this.needWrap=!1)};VT100.prototype.ht=function $VT100$$ht$($count$$){void 0==$count$$&&($count$$=1);for(var $cx$$=this.cursorX;0<$count$$--;)for(;$cx$$++<this.terminalWidth;){var $tabState$$=this.userTabStop[$cx$$];if(!1!=$tabState$$)if($tabState$$)break;else if(0==$cx$$%8)break}$cx$$>this.terminalWidth-1&&($cx$$=this.terminalWidth-1);$cx$$!=this.cursorX&&this.gotoXY($cx$$,this.cursorY)};
VT100.prototype.rt=function $VT100$$rt$($count$$){void 0==$count$$&&($count$$=1);for(var $cx$$=this.cursorX;0<$count$$--;)for(;0<$cx$$--;){var $tabState$$=this.userTabStop[$cx$$];if(!1!=$tabState$$)if($tabState$$)break;else if(0==$cx$$%8)break}0>$cx$$&&($cx$$=0);$cx$$!=this.cursorX&&this.gotoXY($cx$$,this.cursorY)};VT100.prototype.cr=function $VT100$$cr$(){this.gotoXY(0,this.cursorY);this.needWrap=!1};
VT100.prototype.lf=function $VT100$$lf$($count$$){void 0==$count$$?$count$$=1:($count$$>this.terminalHeight&&($count$$=this.terminalHeight),1>$count$$&&($count$$=1));for(;0<$count$$--;)this.cursorY==this.bottom-1?(this.scrollRegion(0,this.top+1,this.terminalWidth,this.bottom-this.top-1,0,-1,this.color,this.style),offset=void 0):this.cursorY<this.terminalHeight-1&&this.gotoXY(this.cursorX,this.cursorY+1)};
VT100.prototype.ri=function $VT100$$ri$($count$$){void 0==$count$$?$count$$=1:($count$$>this.terminalHeight&&($count$$=this.terminalHeight),1>$count$$&&($count$$=1));for(;0<$count$$--;)this.cursorY==this.top?this.scrollRegion(0,this.top,this.terminalWidth,this.bottom-this.top-1,0,1,this.color,this.style):0<this.cursorY&&this.gotoXY(this.cursorX,this.cursorY-1);this.needWrap=!1};VT100.prototype.respondID=function $VT100$$respondID$(){this.respondString+="\u001b[?6c"};
VT100.prototype.respondSecondaryDA=function $VT100$$respondSecondaryDA$(){this.respondString+="\u001b[>0;0;0c"};
VT100.prototype.updateStyle=function $VT100$$updateStyle$(){this.style="";this.attr&512&&(this.style="text-decoration:underline;");var $bg$$=this.attr>>4&15,$fg$$=this.attr&15;if(this.attr&256)var $tmp$$=$bg$$,$bg$$=$fg$$,$fg$$=$tmp$$;1024==(this.attr&1280)?$fg$$=8:this.attr&2048&&($fg$$|=8);this.attr&4096&&($bg$$^=8);if($bg$$==$fg$$&&7==($fg$$^=8))$fg$$=8;if(7==$bg$$&&8<=$fg$$&&7==($fg$$-=8))$fg$$=8;this.color="ansi"+$fg$$+" bgAnsi"+$bg$$};
VT100.prototype.setAttrColors=function $VT100$$setAttrColors$($attr$$){$attr$$!=this.attr&&(this.attr=$attr$$,this.updateStyle())};VT100.prototype.saveCursor=function $VT100$$saveCursor$(){this.savedX[this.currentScreen]=this.cursorX;this.savedY[this.currentScreen]=this.cursorY;this.savedAttr[this.currentScreen]=this.attr;this.savedUseGMap=this.useGMap;for(var $i$$=0;4>$i$$;$i$$++)this.savedGMap[$i$$]=this.GMap[$i$$];this.savedValid[this.currentScreen]=!0};
VT100.prototype.restoreCursor=function $VT100$$restoreCursor$(){if(this.savedValid[this.currentScreen]){this.attr=this.savedAttr[this.currentScreen];this.updateStyle();this.useGMap=this.savedUseGMap;for(var $i$$=0;4>$i$$;$i$$++)this.GMap[$i$$]=this.savedGMap[$i$$];this.translate=this.GMap[this.useGMap];this.needWrap=!1;this.gotoXY(this.savedX[this.currentScreen],this.savedY[this.currentScreen])}};
VT100.prototype.setMode=function $VT100$$setMode$($state$$){for(var $i$$=0;$i$$<=this.npar;$i$$++)if(this.isQuestionMark)switch(this.par[$i$$]){case 1:this.cursorKeyMode=$state$$;break;case 5:this.isInverted=$state$$;this.refreshInvertedState();break;case 6:this.offsetMode=$state$$;break;case 7:this.autoWrapMode=$state$$;break;case 1E3:case 9:this.mouseReporting=$state$$;break;case 25:(this.cursorNeedsShowing=$state$$)?this.showCursor():this.hideCursor();break;case 1047:case 1049:case 47:this.enableAlternateScreen($state$$)}else switch(this.par[$i$$]){case 3:this.dispCtrl=
$state$$;break;case 4:this.insertMode=$state$$;break;case 20:this.crLfMode=$state$$}};VT100.prototype.statusReport=function $VT100$$statusReport$(){this.respondString+="\u001b[0n"};VT100.prototype.cursorReport=function $VT100$$cursorReport$(){this.respondString+="\u001b["+(this.cursorY+(this.offsetMode?this.top+1:1))+";"+(this.cursorX+1)+"R"};VT100.prototype.setCursorAttr=function $VT100$$setCursorAttr$(){};
VT100.prototype.openPrinterWindow=function $VT100$$openPrinterWindow$(){var $rc$$=!0;try{if(!this.printWin||this.printWin.closed){this.printWin=window.open("","print-output","width=800,height=600,directories=no,location=no,menubar=yes,status=no,toolbar=no,titlebar=yes,scrollbars=yes,resizable=yes");this.printWin.document.body.innerHTML='<link rel="stylesheet" href="'+document.location.protocol+"//"+document.location.host+document.location.pathname.replace(/[^/]*$/,"")+'print-styles.css" type="text/css">\n<div id="options"><input id="autoprint" type="checkbox"'+
(this.autoprint?" checked":"")+'>Automatically, print page(s) when job is ready</input></div>\n<div id="spacer"><input type="checkbox">&nbsp;</input></div><pre id="print"></pre>\n';var $autoprint$$=this.printWin.document.getElementById("autoprint");this.addListener($autoprint$$,"click",function($vt100$$,$autoprint$$){return function(){$vt100$$.autoprint=$autoprint$$.checked;$vt100$$.storeUserSettings();return!1}}(this,$autoprint$$));this.printWin.document.title="ShellInABox Printer Output"}}catch($e$$){$rc$$=
!1}$rc$$&=this.printWin&&!this.printWin.closed&&1<(this.printWin.innerWidth||this.printWin.document.documentElement.clientWidth||this.printWin.document.body.clientWidth);if(!$rc$$&&100==this.printing){this.printing=!0;var $win$$=this.printWin;setTimeout(function(){(!$win$$||$win$$.closed||1>=($win$$.innerWidth||$win$$.document.documentElement.clientWidth||$win$$.document.body.clientWidth))&&alert("Attempted to print, but a popup blocker prevented the printer window from opening")},2E3)}return $rc$$};
VT100.prototype.sendToPrinter=function $VT100$$sendToPrinter$($s$$){this.openPrinterWindow();try{var $doc$$=this.printWin.document,$print$$=$doc$$.getElementById("print");$print$$.lastChild&&"#text"==$print$$.lastChild.nodeName?$print$$.lastChild.textContent+=this.replaceChar($s$$," ","\u00a0"):$print$$.appendChild($doc$$.createTextNode(this.replaceChar($s$$," ","\u00a0")))}catch($e$$){}};
VT100.prototype.sendControlToPrinter=function $VT100$$sendControlToPrinter$($ch$$){try{switch($ch$$){case 9:this.openPrinterWindow();var $print$$=this.printWin.document.getElementById("print");this.sendToPrinter(this.spaces(8-($print$$.lastChild&&"#text"==$print$$.lastChild.nodeName?$print$$.lastChild.textContent.length:0)%8));break;case 10:break;case 12:this.openPrinterWindow();var $pageBreak$$=this.printWin.document.createElement("div");$pageBreak$$.className="pagebreak";$pageBreak$$.innerHTML=
"<hr />";this.printWin.document.getElementById("print").appendChild($pageBreak$$);break;case 13:this.openPrinterWindow();var $lineBreak$$=this.printWin.document.createElement("br");this.printWin.document.getElementById("print").appendChild($lineBreak$$);break;case 27:this.isEsc=1;break;default:switch(this.isEsc){case 1:this.isEsc=0;switch($ch$$){case 91:this.isEsc=2}break;case 2:if(this.npar=0,this.par=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.isEsc=3,this.isQuestionMark=63==$ch$$)break;case 3:if(59==
$ch$$){this.npar++;break}else if(48<=$ch$$&&57>=$ch$$){var $par$$=this.par[this.npar];void 0==$par$$&&($par$$=0);this.par[this.npar]=10*$par$$+($ch$$&15);break}else this.isEsc=4;case 4:this.isEsc=0;if(this.isQuestionMark)break;switch($ch$$){case 105:this.csii(this.par[0])}break;default:this.isEsc=0}}}catch($e$$){}};
VT100.prototype.csiAt=function $VT100$$csiAt$($number$$){0==$number$$&&($number$$=1);$number$$>this.terminalWidth-this.cursorX&&($number$$=this.terminalWidth-this.cursorX);this.scrollRegion(this.cursorX,this.cursorY,this.terminalWidth-this.cursorX-$number$$,1,$number$$,0,this.color,this.style);this.needWrap=!1};
VT100.prototype.csii=function $VT100$$csii$($number$$){switch($number$$){case 0:window.print();break;case 4:try{if(this.printing&&this.printWin&&!this.printWin.closed){for(var $print$$=this.printWin.document.getElementById("print");$print$$.lastChild&&"DIV"==$print$$.lastChild.tagName&&"pagebreak"==$print$$.lastChild.className;)$print$$.removeChild($print$$.lastChild);this.autoprint&&this.printWin.print()}}catch($e$$){}this.printing=!1;break;case 5:!this.printing&&(this.printWin&&!this.printWin.closed)&&
(this.printWin.document.getElementById("print").innerHTML=""),this.printing=100}};
VT100.prototype.csiJ=function $VT100$$csiJ$($number$$){switch($number$$){case 0:this.clearRegion(this.cursorX,this.cursorY,this.terminalWidth-this.cursorX,1,this.color,this.style);this.cursorY<this.terminalHeight-2&&this.clearRegion(0,this.cursorY+1,this.terminalWidth,this.terminalHeight-this.cursorY-1,this.color,this.style);break;case 1:0<this.cursorY&&this.clearRegion(0,0,this.terminalWidth,this.cursorY,this.color,this.style);this.clearRegion(0,this.cursorY,this.cursorX+1,1,this.color,this.style);
break;case 2:this.clearRegion(0,0,this.terminalWidth,this.terminalHeight,this.color,this.style);break;default:return}needWrap=!1};
VT100.prototype.csiK=function $VT100$$csiK$($number$$){switch($number$$){case 0:this.clearRegion(this.cursorX,this.cursorY,this.terminalWidth-this.cursorX,1,this.color,this.style);break;case 1:this.clearRegion(0,this.cursorY,this.cursorX+1,1,this.color,this.style);break;case 2:this.clearRegion(0,this.cursorY,this.terminalWidth,1,this.color,this.style);break;default:return}needWrap=!1};
VT100.prototype.csiL=function $VT100$$csiL$($number$$){this.cursorY>=this.bottom||(0==$number$$&&($number$$=1),$number$$>this.bottom-this.cursorY&&($number$$=this.bottom-this.cursorY),this.scrollRegion(0,this.cursorY,this.terminalWidth,this.bottom-this.cursorY-$number$$,0,$number$$,this.color,this.style),needWrap=!1)};
VT100.prototype.csiM=function $VT100$$csiM$($number$$){this.cursorY>=this.bottom||(0==$number$$&&($number$$=1),$number$$>this.bottom-this.cursorY&&($number$$=bottom-cursorY),this.scrollRegion(0,this.cursorY+$number$$,this.terminalWidth,this.bottom-this.cursorY-$number$$,0,-$number$$,this.color,this.style),needWrap=!1)};
VT100.prototype.csim=function $VT100$$csim$(){for(var $i$$=0;$i$$<=this.npar;$i$$++)switch(this.par[$i$$]){case 0:this.attr=240;break;case 1:this.attr=this.attr&-1025|2048;break;case 2:this.attr=this.attr&-2049|1024;break;case 4:this.attr|=512;break;case 5:this.attr|=4096;break;case 7:this.attr|=256;break;case 10:this.translate=this.GMap[this.useGMap];this.toggleMeta=this.dispCtrl=!1;break;case 11:this.translate=this.CodePage437Map;this.dispCtrl=!0;this.toggleMeta=!1;break;case 12:this.translate=
this.CodePage437Map;this.toggleMeta=this.dispCtrl=!0;break;case 21:case 22:this.attr&=-3073;break;case 24:this.attr&=-513;break;case 25:this.attr&=-4097;break;case 27:this.attr&=-257;break;case 38:this.attr=this.attr&-3088|512;break;case 39:this.attr&=-3600;break;case 49:this.attr|=240;break;default:30<=this.par[$i$$]&&37>=this.par[$i$$]?this.attr=this.attr&-16|this.par[$i$$]-30:40<=this.par[$i$$]&&47>=this.par[$i$$]&&(this.attr=this.attr&-241|this.par[$i$$]-40<<4)}this.updateStyle()};
VT100.prototype.csiP=function $VT100$$csiP$($number$$){0==$number$$&&($number$$=1);$number$$>this.terminalWidth-this.cursorX&&($number$$=this.terminalWidth-this.cursorX);this.scrollRegion(this.cursorX+$number$$,this.cursorY,this.terminalWidth-this.cursorX-$number$$,1,-$number$$,0,this.color,this.style);needWrap=!1};
VT100.prototype.csiX=function $VT100$$csiX$($number$$){0==$number$$&&$number$$++;$number$$>this.terminalWidth-this.cursorX&&($number$$=this.terminalWidth-this.cursorX);this.clearRegion(this.cursorX,this.cursorY,$number$$,1,this.color,this.style);needWrap=!1};VT100.prototype.settermCommand=function $VT100$$settermCommand$(){};
VT100.prototype.doControl=function $VT100$$doControl$($c$$2_ch$$5_i$$){if(this.printing)return this.sendControlToPrinter($c$$2_ch$$5_i$$),"";var $lineBuf$$="";switch($c$$2_ch$$5_i$$){case 0:break;case 8:this.bs();break;case 9:this.ht();break;case 10:case 11:case 12:case 132:if(this.lf(),!this.crLfMode)break;case 13:this.cr();break;case 133:this.cr();this.lf();break;case 14:this.useGMap=1;this.translate=this.GMap[1];this.dispCtrl=!0;break;case 15:this.useGMap=0;this.translate=this.GMap[0];this.dispCtrl=
!1;break;case 24:case 26:this.isEsc=0;break;case 27:this.isEsc=1;break;case 127:break;case 136:this.userTabStop[this.cursorX]=!0;break;case 141:this.ri();break;case 142:this.isEsc=18;break;case 143:this.isEsc=19;break;case 154:this.respondID();break;case 155:this.isEsc=2;break;case 7:if(17!=this.isEsc){this.beep();break}default:switch(this.isEsc){case 1:this.isEsc=0;switch($c$$2_ch$$5_i$$){case 37:this.isEsc=13;break;case 40:this.isEsc=8;break;case 45:case 41:this.isEsc=9;break;case 46:case 42:this.isEsc=
10;break;case 47:case 43:this.isEsc=11;break;case 35:this.isEsc=7;break;case 55:this.saveCursor();break;case 56:this.restoreCursor();break;case 62:this.applKeyMode=!1;break;case 61:this.applKeyMode=!0;break;case 68:this.lf();break;case 69:this.cr();this.lf();break;case 77:this.ri();break;case 78:this.isEsc=18;break;case 79:this.isEsc=19;break;case 72:this.userTabStop[this.cursorX]=!0;break;case 90:this.respondID();break;case 91:this.isEsc=2;break;case 93:this.isEsc=15;break;case 99:this.reset();break;
case 103:this.flashScreen()}break;case 15:switch($c$$2_ch$$5_i$$){case 48:case 49:case 50:this.statusString="";this.isEsc=17;break;case 80:this.npar=0;this.par=[0,0,0,0,0,0,0];this.isEsc=16;break;case 82:this.isEsc=0;break;default:this.isEsc=0}break;case 16:48<=$c$$2_ch$$5_i$$&&57>=$c$$2_ch$$5_i$$||65<=$c$$2_ch$$5_i$$&&70>=$c$$2_ch$$5_i$$||97<=$c$$2_ch$$5_i$$&&102>=$c$$2_ch$$5_i$$?(this.par[this.npar++]=57<$c$$2_ch$$5_i$$?($c$$2_ch$$5_i$$&223)-55:$c$$2_ch$$5_i$$&15,7==this.npar&&(this.isEsc=0)):this.isEsc=
0;break;case 2:if(this.npar=0,this.par=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.isEsc=3,91==$c$$2_ch$$5_i$$){this.isEsc=6;break}else if(this.isQuestionMark=63==$c$$2_ch$$5_i$$)break;case 5:case 3:if(59==$c$$2_ch$$5_i$$){this.npar++;break}else if(48<=$c$$2_ch$$5_i$$&&57>=$c$$2_ch$$5_i$$){var $b_g_par$$=this.par[this.npar];void 0==$b_g_par$$&&($b_g_par$$=0);this.par[this.npar]=10*$b_g_par$$+($c$$2_ch$$5_i$$&15);break}else if(5==this.isEsc){switch($c$$2_ch$$5_i$$){case 99:0==this.par[0]&&this.respondSecondaryDA()}this.isEsc=
0;break}else this.isEsc=4;case 4:this.isEsc=0;if(this.isQuestionMark){switch($c$$2_ch$$5_i$$){case 104:this.setMode(!0);break;case 108:this.setMode(!1);break;case 99:this.setCursorAttr(this.par[2],this.par[1])}this.isQuestionMark=!1;break}switch($c$$2_ch$$5_i$$){case 33:this.isEsc=12;break;case 62:this.npar||(this.isEsc=5);break;case 71:case 96:this.gotoXY(this.par[0]-1,this.cursorY);break;case 65:this.gotoXY(this.cursorX,this.cursorY-(this.par[0]?this.par[0]:1));break;case 66:case 101:this.gotoXY(this.cursorX,
this.cursorY+(this.par[0]?this.par[0]:1));break;case 67:case 97:this.gotoXY(this.cursorX+(this.par[0]?this.par[0]:1),this.cursorY);break;case 68:this.gotoXY(this.cursorX-(this.par[0]?this.par[0]:1),this.cursorY);break;case 69:this.gotoXY(0,this.cursorY+(this.par[0]?this.par[0]:1));break;case 70:this.gotoXY(0,this.cursorY-(this.par[0]?this.par[0]:1));break;case 100:this.gotoXaY(this.cursorX,this.par[0]-1);break;case 72:case 102:this.gotoXaY(this.par[1]-1,this.par[0]-1);break;case 73:this.ht(this.par[0]?
this.par[0]:1);break;case 64:this.csiAt(this.par[0]);break;case 105:this.csii(this.par[0]);break;case 74:this.csiJ(this.par[0]);break;case 75:this.csiK(this.par[0]);break;case 76:this.csiL(this.par[0]);break;case 77:this.csiM(this.par[0]);break;case 109:this.csim();break;case 80:this.csiP(this.par[0]);break;case 88:this.csiX(this.par[0]);break;case 83:this.lf(this.par[0]?this.par[0]:1);break;case 84:this.ri(this.par[0]?this.par[0]:1);break;case 99:this.par[0]||this.respondID();break;case 103:if(0==
this.par[0])this.userTabStop[this.cursorX]=!1;else if(2==this.par[0]||3==this.par[0]){this.userTabStop=[];for($c$$2_ch$$5_i$$=0;$c$$2_ch$$5_i$$<this.terminalWidth;$c$$2_ch$$5_i$$++)this.userTabStop[$c$$2_ch$$5_i$$]=!1}break;case 104:this.setMode(!0);break;case 108:this.setMode(!1);break;case 110:switch(this.par[0]){case 5:this.statusReport();break;case 6:this.cursorReport()}break;case 114:$c$$2_ch$$5_i$$=this.par[0]?this.par[0]:1;$b_g_par$$=this.par[1]?this.par[1]:this.terminalHeight;$c$$2_ch$$5_i$$<
$b_g_par$$&&$b_g_par$$<=this.terminalHeight&&(this.top=$c$$2_ch$$5_i$$-1,this.bottom=$b_g_par$$,this.gotoXaY(0,0));break;case 98:$c$$2_ch$$5_i$$=this.par[0]?this.par[0]:1;for($c$$2_ch$$5_i$$>this.terminalWidth*this.terminalHeight&&($c$$2_ch$$5_i$$=this.terminalWidth*this.terminalHeight);0<$c$$2_ch$$5_i$$--;)$lineBuf$$+=this.lastCharacter;break;case 115:this.saveCursor();break;case 117:this.restoreCursor();break;case 90:this.rt(this.par[0]?this.par[0]:1);break;case 93:this.settermCommand()}break;case 12:"p"==
$c$$2_ch$$5_i$$&&this.reset();this.isEsc=0;break;case 13:this.isEsc=0;switch($c$$2_ch$$5_i$$){case 64:this.utfEnabled=!1;break;case 71:case 56:this.utfEnabled=!0}break;case 6:this.isEsc=0;break;case 7:this.isEsc=0;break;case 8:case 9:case 10:case 11:$b_g_par$$=this.isEsc-8;this.isEsc=0;switch($c$$2_ch$$5_i$$){case 48:this.GMap[$b_g_par$$]=this.VT100GraphicsMap;break;case 66:case 66:this.GMap[$b_g_par$$]=this.Latin1Map;break;case 85:this.GMap[$b_g_par$$]=this.CodePage437Map;break;case 75:this.GMap[$b_g_par$$]=
this.DirectToFontMap}this.useGMap==$b_g_par$$&&(this.translate=this.GMap[$b_g_par$$]);break;case 17:if(7==$c$$2_ch$$5_i$$){this.statusString&&";"==this.statusString.charAt(0)&&(this.statusString=this.statusString.substr(1));try{window.status=this.statusString}catch($e$$){}this.isEsc=0}else this.statusString+=String.fromCharCode($c$$2_ch$$5_i$$);break;case 18:case 19:if(256>$c$$2_ch$$5_i$$)if($c$$2_ch$$5_i$$=this.GMap[this.isEsc-18+2][this.toggleMeta?$c$$2_ch$$5_i$$|128:$c$$2_ch$$5_i$$],61440==($c$$2_ch$$5_i$$&
65280))$c$$2_ch$$5_i$$&=255;else if(65279==$c$$2_ch$$5_i$$||8202<=$c$$2_ch$$5_i$$&&8207>=$c$$2_ch$$5_i$$){this.isEsc=0;break}this.lastCharacter=String.fromCharCode($c$$2_ch$$5_i$$);$lineBuf$$+=this.lastCharacter;this.isEsc=0;break;default:this.isEsc=0}}return $lineBuf$$};
VT100.prototype.renderString=function $VT100$$renderString$($s$$,$showCursor$$){if(this.printing)this.sendToPrinter($s$$),$showCursor$$&&this.showCursor();else{var $incX$$=$s$$.length;if($incX$$>this.terminalWidth-this.cursorX){$incX$$=this.terminalWidth-this.cursorX;if(0>=$incX$$)return;$s$$=$s$$.substr(0,$incX$$-1)+$s$$.charAt($s$$.length-1)}$showCursor$$&&(this.cursor.style.visibility="");this.putString(this.cursorX,this.cursorY,$s$$,this.color,this.style)}};
VT100.prototype.vt100=function $VT100$$vt100$($s$$){this.cursorNeedsShowing=this.hideCursor();for(var $lineBuf$$=this.respondString="",$i$$=0;$i$$<$s$$.length;$i$$++){var $ch$$=$s$$.charCodeAt($i$$);if(this.utfEnabled)if(127<$ch$$)if(0<this.utfCount&&128==($ch$$&192))if(this.utfChar=this.utfChar<<6|$ch$$&63,0>=--this.utfCount)$ch$$=65535<this.utfChar||0>this.utfChar?65533:this.utfChar;else continue;else{192==($ch$$&224)?(this.utfCount=1,this.utfChar=$ch$$&31):224==($ch$$&240)?(this.utfCount=2,this.utfChar=
$ch$$&15):240==($ch$$&248)?(this.utfCount=3,this.utfChar=$ch$$&7):248==($ch$$&252)?(this.utfCount=4,this.utfChar=$ch$$&3):252==($ch$$&254)?(this.utfCount=5,this.utfChar=$ch$$&1):this.utfCount=0;continue}else this.utfCount=0;if((32<=$ch$$&&127>=$ch$$||160<=$ch$$||this.utfEnabled&&128<=$ch$$||!(this.dispCtrl?this.ctrlAlways:this.ctrlAction)[$ch$$&31])&&(127!=$ch$$||this.dispCtrl)&&0==this.isEsc){256>$ch$$&&($ch$$=this.translate[this.toggleMeta?$ch$$|128:$ch$$]);if(61440==($ch$$&65280))$ch$$&=255;else if(65279==
$ch$$||8202<=$ch$$&&8207>=$ch$$)continue;if(!this.printing){if((this.needWrap||this.insertMode)&&$lineBuf$$)this.renderString($lineBuf$$),$lineBuf$$="";this.needWrap&&(this.cr(),this.lf());this.insertMode&&this.scrollRegion(this.cursorX,this.cursorY,this.terminalWidth-this.cursorX-1,1,1,0,this.color,this.style)}this.lastCharacter=String.fromCharCode($ch$$);$lineBuf$$+=this.lastCharacter;!this.printing&&this.cursorX+$lineBuf$$.length>=this.terminalWidth&&(this.needWrap=this.autoWrapMode)}else if($lineBuf$$&&
(this.renderString($lineBuf$$),$lineBuf$$=""),$ch$$=this.doControl($ch$$),$ch$$.length)this.respondString+=this.vt100($ch$$)}$lineBuf$$?this.renderString($lineBuf$$,this.cursorNeedsShowing):this.cursorNeedsShowing&&this.showCursor();return this.respondString};
VT100.prototype.Latin1Map=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,
146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255];
VT100.prototype.VT100GraphicsMap=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,8594,8592,8593,8595,47,9608,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,160,9670,9618,9225,9228,9229,9226,176,177,9617,9227,9496,9488,9484,9492,9532,63488,63489,9472,63491,63492,9500,9508,9524,9516,9474,8804,8805,960,8800,163,183,127,128,129,130,131,132,
133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255];
VT100.prototype.CodePage437Map=[0,9786,9787,9829,9830,9827,9824,8226,9688,9675,9689,9794,9792,9834,9835,9788,9654,9664,8597,8252,182,167,9644,8616,8593,8595,8594,8592,8735,8596,9650,9660,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,8962,
199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197,201,230,198,244,246,242,251,249,255,214,220,162,163,165,8359,402,225,237,243,250,241,209,170,186,191,8976,172,189,188,161,171,187,9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488,9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575,9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600,945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745,8801,
177,8805,8804,8992,8993,247,8776,176,8729,183,8730,8319,178,9632,160];
VT100.prototype.DirectToFontMap=[61440,61441,61442,61443,61444,61445,61446,61447,61448,61449,61450,61451,61452,61453,61454,61455,61456,61457,61458,61459,61460,61461,61462,61463,61464,61465,61466,61467,61468,61469,61470,61471,61472,61473,61474,61475,61476,61477,61478,61479,61480,61481,61482,61483,61484,61485,61486,61487,61488,61489,61490,61491,61492,61493,61494,61495,61496,61497,61498,61499,61500,61501,61502,61503,61504,61505,61506,61507,61508,61509,61510,61511,61512,61513,61514,61515,61516,61517,
61518,61519,61520,61521,61522,61523,61524,61525,61526,61527,61528,61529,61530,61531,61532,61533,61534,61535,61536,61537,61538,61539,61540,61541,61542,61543,61544,61545,61546,61547,61548,61549,61550,61551,61552,61553,61554,61555,61556,61557,61558,61559,61560,61561,61562,61563,61564,61565,61566,61567,61568,61569,61570,61571,61572,61573,61574,61575,61576,61577,61578,61579,61580,61581,61582,61583,61584,61585,61586,61587,61588,61589,61590,61591,61592,61593,61594,61595,61596,61597,61598,61599,61600,61601,
61602,61603,61604,61605,61606,61607,61608,61609,61610,61611,61612,61613,61614,61615,61616,61617,61618,61619,61620,61621,61622,61623,61624,61625,61626,61627,61628,61629,61630,61631,61632,61633,61634,61635,61636,61637,61638,61639,61640,61641,61642,61643,61644,61645,61646,61647,61648,61649,61650,61651,61652,61653,61654,61655,61656,61657,61658,61659,61660,61661,61662,61663,61664,61665,61666,61667,61668,61669,61670,61671,61672,61673,61674,61675,61676,61677,61678,61679,61680,61681,61682,61683,61684,61685,
61686,61687,61688,61689,61690,61691,61692,61693,61694,61695];VT100.prototype.ctrlAction=[!0,!1,!1,!1,!1,!1,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!0,!1,!0,!0,!1,!1,!1,!1];VT100.prototype.ctrlAlways=[!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!0,!1,!0,!0,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1,!1];